arch 65816
hirom
fillbyte $FF
padbyte $FF




org $8b8000
db $00,$00,$01
EFanger_Babel:
{
lda #$8019 : tsb $12
lda $06DC : clc : adc #$0020 : sta $06DC
ldy $09AA
lda $000E,y : ora #$3000 : sta $000E,y
cop #$57 : dl EFanger_OnDeath
cop #$A5 : dl EFBabelReturnListener : db $00,$00 : dw $2000
lda $0ad4 : cmp #$0002 : bne +
  jmp EFanger_FromBabelHandler
+:
ldy $09AA
lda #$0088 : sta $0002,y
lda #$F5F9 : sta $0000,y
lda #$0000 : sta $0008,y
lda #$0800 : tsb $09AE
cop #$C1
lda $09AE : bit #$0800 : beq +
  rtl
+:
}
jmp EFanger_FromBabelHandler


;org $8b8060
EFStatueAwardListener:
{
cop #$C1
lda $09AE : bit #$0020 : bne +    ; $01
rtl
+:
bit #$0200 : beq +    ; $03
cop #$C1
rtl
+:
cop #$D3 : dw $016A : db $01
lda #$FFF0 : tsb $065A
cop #$DA : db $3B
cop #$BF : dw $80B5
lda #$0003 : sta $0AAC
lda #$008A : sta $0B12
lda #$0016 : sta $0B08
  sta $0B0A
lda #$002C : sta $0B0C
  sta $0B0E
lda #$3300 : sta $0B10
cop #$26 : db $FD, $00, $00, $00, $00, $00, $00, $11
cop #$E0
}

;org $8B80B5
db $D3,$C2,$00,$D6,$67,$83,$84,$85,$84,$80,$A4,$84,$83,$AC,$A4,$87,$84,$AC,$CB,$63,$80,$8D,$83,$AC,$45,$80,$8D,$86,$84,$A2,$4F,$AC,$AC,$CB,$4B,$8E,$8E,$8A,$4F,$AC,$40,$AC,$4C,$A9,$A3,$A4,$88,$82,$AC,$63,$A4,$80,$A4,$A5,$84,$4F,$C3,$00,$C0

;org $8B80F0
EFBabelReturnListener:
{
cop #$C1
lda $0AEC : beq +    ; Continue if 0 enemies on map.
  rtl
+:
ldy $09AA
lda #$0088 : sta $0002,y
lda #$F3B1 : sta $0000,y
lda #$0000 : sta $0008,y
lda #$0800 : tsb $09AE
cop #$C1
lda $09AE : bit #$0800 : beq +
  rtl
+:
cop #$CD : dw $0178    ; Set map switch.
lda #$0003 : sta $0648
lda #$0403 : sta $064A
cop #$26 : db $E0 : dw $02F8,$00A0 : db $03,$00,$18
cop #$E0
}


;org $8b813a
EFPlayerLayerManager:
{
ldy $09AA
lda $0016,y : cmp #$01C7
bcs +    ; $0D
lda $000E,y : and #$CFFF : ora #$2000 : sta $000E,y
rtl
+:
lda $000E,y : ora #$3000 : sta $000E,y
rtl
}

;org $8b815c
db $00,$00,$01
EFanger:
cop #$A5 : dl EFPlayerLayerManager : dw $0000, $2000    ; $8B813A
lda #$0003
jsl LR_SecOnDefeatedBossA    ; $80B05E
bcc +    ; $08
  stz $0AEC
  stz $0AEE
  cop #$E0
+:
lda #$8019 : tsb $12
cop #$A5 : dl EFStatueAwardListener : dw $0000, $2000    ; $8B8060
cop #$57 : dl EFanger_OnDeath    ; $8B8582
cop #$0F : db $0F, $2A
cop #$0F : db $10, $2A
cop #$0F : db $0F, $2B
cop #$0F : db $10, $2B
cop #$C1
cop #$45 : db $0D, $19, $12, $1B : dw .PlayerFalling    ; $81A7
rtl
.PlayerFalling:
ldy $09AA
lda $000E,y : ora #$3000 : sta $000E,y
cop #$C1
cop #$45 : db $0F, $2C, $11, $2E : dw .PlayerHere    ; $81BE
rtl
.PlayerHere:
cop #$10 : db $0F, $2A
cop #$10 : db $10, $2A
cop #$10 : db $0F, $2B
cop #$10 : db $10, $2B
lda #$EFF0 : tsb $065A
cop #$DA : db $1F
cop #$04 : db $0F
cop #$DA : db $3B
lda #$EFF0 : trb $065A
.FromBabelHandler:
cop #$A1 : dl EFangerPiecesVisibilityManager : dw $2000    ; $8B8A09
cop #$9C : dl EFTailPiece : dw $2200    ; $8B861C
lda #$0009    ; numPieces
; org $8b81f4
.SpawnBodyPiece:
pha
cop #$9C : dl EFBodyPiece : dw $2200    ; $8B86EE
pla : dec : bpl .SpawnBodyPiece    ; $F4    ; (-$0C)
; org $8b8200
EFanger_ChooseAttack:
cop #$DA : db $4F
lda #$0080 : trb $10
lda $09A6 : lsr : lsr : lsr : bcs .PreferHorz    ; $16
.PreferVert:
cop #$23 : and #$0003 : sta $0000
cop #$D9 : dw $0000, ..AttackList   ;$821E  ; $823C $823C $825D $82FC
..AttackList:
  dw EFanger_AttackTypeVert, EFanger_AttackTypeVert
  dw EFanger_AttackTypeHorz, EFanger_AttackTypeEgg
.PreferHorz:    ;org $8b8226
cop #$23 : and #$0003 : sta $0000
cop #$D9 : dw $0000, ..AttackList   ;$8234  ; $825D $825D $823C $82FC
..AttackList:
  dw EFanger_AttackTypeHorz, EFanger_AttackTypeHorz
  dw EFanger_AttackTypeVert, EFanger_AttackTypeEgg

;org $8b823c
EFanger_AttackTypeVert:
jsr SR_FangerSetSpawnPtForVert    ; $8BCB
jsr SR_FangerSpawnSoundAndVortex    ; $8BBE
cop #$DA : db $3B
lda #$02C8 : sta $16
cop #$C8 : dw EFanger_AttackVertFlyUp    ; $8313 Flight upward.
jsr SR_FangerSetSpawnPtForVert    ; $8BCB
lda #$0048 : sta $16
cop #$C8 : dw EFanger_AttackVertFlyDown    ; $8348    ; Return downward.
jmp EFanger_ChooseAttack    ; $8200

;org $8b825d
EFanger_AttackTypeHorz:
lda $09A2 : cmp #$0180 : bcc EFanger_AttackTypeHorzRight    ; $4E
EFanger_AttackTypeHorzLeft:
cop #$23 : and #$007F : sec : sbc #$003F : clc : adc #$0278
  sta $14
  sta $24
jsr SR_FangerSpawnSoundAndVortex    ; $8BBE
lda #$0000 : sta $7F100C,x
cop #$DA : db $13
.KeepGoing:    ; org $8b8283
lda #$02E0 : sta $16
lda #$0003 : sta $26
jsr SR_SetPieceHorzMoveDelays    ; $8B86
jsr SR_SetHorzLeftOrbitVars    ; $8B32
cop #$C8 : dw EFangerPiece_MoveHorzLeft    ; $837D
lda $7F0018,x : sec : sbc #$0080
  sta $14
  sta $24
  bpl +    ; $03
    jmp EFanger_ChooseAttack    ; $8200
+:
cmp #$00E8 : bcs .KeepGoing    ; (-$2A)
cop #$DA : db $31
jmp EFanger_ChooseAttack    ; $8200

;org $8b82b3
EFanger_AttackTypeHorzRight:
cop #$23 : and #$007F : sec : sbc #$003F : clc : adc #$0088
  sta $14
  sta $24
jsr SR_FangerSpawnSoundAndVortex    ; $8BBE
lda #$0000 : sta $7F100C,x
cop #$DA : db $13
.KeepGoing:    ; org $8b82d1
lda #$02E0 : sta $16
lda #$0004 : sta $26
jsr SR_SetPieceHorzMoveDelays    ; $8B86
jsr SR_SetHorzRightOrbitVars    ; $8B5C
cop #$C8 : dw EFangerPiece_MoveHorzRight    ; $8422
lda $7F0018,x : clc : adc #$0080
  sta $14
  sta $24
  cmp #$0218 : bcc .KeepGoing    ; $DB    ; (-$25)
cop #$DA : db $31
jmp EFanger_ChooseAttack    ; $8200

;org $8b82fc
EFanger_AttackTypeEgg:
lda $0DBC : cmp #$003C : bcc +    ; $03
  jmp EFanger_ChooseAttack    ; $8200
+:
lda #$0005 : sta $26
cop #$C8 : dw EFanger_DoAttackEgg    ; $84C7
jmp EFanger_ChooseAttack    ; $8200

;org $8b8313
EFanger_AttackVertFlyUp:
lda #$0001 : sta $26
jsr SR_SetFangerVertFlySineParams    ; $8AE1
cop #$8D : db $00
cop #$AB : db $08
cop #$C1
jsr SR_ScaledSine8B    ; $9CE8
clc : adc $7F100C,x : sta $14
lda $7F0010,x : clc : adc #$0006 : and #$00FF : sta $7F0010,x
lda $16 : cmp #$0050 : bcc +
  rtl
+:
stz $2E
cop #$C5

;org $8b8348
EFanger_AttackVertFlyDown:
lda #$0002 : sta $26
jsr SR_SetFangerVertFlySineParams    ; $8AE1
cop #$8D : db $04
cop #$AB : db $0B
cop #$C1
jsr SR_ScaledSine8B    ; $9CE8
clc : adc $7F100C,x : sta $14
lda $7F0010,x : clc : adc #$0008 : and #$00FF : sta $7F0010,x
lda $16 : cmp #$03A0 : bcs +
  rtl
+:
stz $2E
cop #$C5

;org $8b837d
EFangerPiece_MoveHorzLeft:
lda $7F000A,x : sta $28
cop #$8D : db $FF
stz $08
stz $2E
stz $2C
.Again:
cop #$C2
lda $7F0018,x : sta $14
lda $7F001A,x : sta $16
jsl LR_EllipseOrbit    ; $80F432
lda $7F0010,x : clc : adc #$0010
  and #$00FF : lsr : lsr : lsr : lsr : lsr
  cmp $7F0000,x : beq .TurnFinishedDoReset
  sta $7F0000,x
phx
tax
stz $28
sep #$20
lda #$40 : trb $0F
lda.l T_EFHorzLeftBodySpriteIndexes,x
plx
clc : adc $7F000A,x : sta $28
bpl .SpriteNoVMirror
.SpriteDoVMirror:
and #$7F : sta $28
lda #$40 : tsb $0F : bra +
.SpriteNoVMirror:
sta $28
+:
rep #$20
cop #$8D : db $FF
.TurnFinishedDoReset:
sep #$20
lda $7F0010,x : clc : adc #$02
  sta $7F0010,x
  sta $7F0011,x
  sec : sbc $7F0002,x : bit #$80 : beq ++
lda $7F0002,x : clc : adc #$80 : sta $7F0002,x
lda $7F000E,x : dec : bmi +++
  sta $7F000E,x
++:
rep #$20
jmp .Again    ; $838C
+++:
rep #$20
cop #$C5
T_EFHorzLeftBodySpriteIndexes:
db $82,$81,$00,$01,$02,$03,$04,$83


;org $8b8422
EFangerPiece_MoveHorzRight:
lda $7F000A,x : sta $28
cop #$8D : db $FF
stz $08
stz $2E
stz $2C
.Again:
cop #$C2
lda $7F0018,x : sta $14
lda $7F001A,x : sta $16
jsl LR_EllipseOrbit    ; $80F432
lda $7F0010,x : clc : adc #$0010
  and #$00FF : lsr : lsr : lsr : lsr : lsr
  cmp $7F0000,x : beq .TurnFinishedDoReset
  sta $7F0000,x
phx
tax
stz $28
sep #$20
lda #$40 : trb $0F
lda.l T_EFHorzRightBodySpriteIndexes,x
plx
clc : adc $7F000A,x : sta $28
bpl .SpriteNoVMirror    ; $0A
.SpriteDoVMirror:
  and #$7F : sta $28
  lda #$40 : tsb $0F : bra +
.SpriteNoVMirror:
sta $28
+:
rep #$20
cop #$8D : db $FF
.TurnFinishedDoReset:
sep #$20
lda $7F0010,x : clc : adc #$FE
  sta $7F0010,x
  sta $7F0011,x
  clc : adc $7F0002,x : bit #$80 : beq ++
lda $7F0002,x : sec : sbc #$80 : sta $7F0002,x
lda $7F000E,x : dec : bmi +++
  sta $7F000E,x
++:
rep #$20
jmp .Again    ; $8431
+++:
rep #$20
cop #$C5
T_EFHorzRightBodySpriteIndexes:
db $02,$03,$04,$83,$82,$81,$00,$01


;org $8b84c7
EFanger_DoAttackEgg:
cop #$23 : sec : sbc #$007F : clc : adc $09A2 : bpl .CheckPosOkay
.TooFarLeft:
clc : adc #$007F
.CheckPosOkay:
cmp #$0030 : bcc .TooFarLeft
cmp #$02D0 : bcc .PositionIsOkay
  sec : sbc #$007F
.PositionIsOkay:    ; org $8b84e5
sta $14
jsr SR_FangerSpawnSoundAndVortex    ; $8BBE
cop #$DA : db $3B
lda #$02CF : sta $16
cop #$80 : db $0F
cop #$89
pea .ReturnFromEgg-1
cop #$23 : and #$0007 : sta $0000
cop #$D9 : dw $0000, .WormOptionList ;$8508 ; $8518 $851D $8522 $8527 $852C $8518 $8518 $8518
.WormOptionList:
  dw .LeftWormRightWorm, .LeftWormRightRunner
  dw .LeftRunnerRightWorm, .LeftWormRightDud
  dw .LeftDudRightWorm, .LeftWormRightWorm
  dw .LeftWormRightWorm, .LeftWormRightWorm
.LeftWormRightWorm:    ;org $8b8518
jsr .SR_MakeLeftEggWorm    ; $856E
bra .SR_MakeRightEggWorm    ; $5B
.LeftWormRightRunner:    ;org $8b851d
jsr .SR_MakeLeftEggWorm    ; $856E
bra .SR_MakeRightEggRunner    ; $24
.LeftRunnerRightWorm:    ;org $8b8522
jsr .SR_MakeRightEggWorm    ; $8578
bra .SR_MakeLeftEggRunner    ; $29
.LeftWormRightDud:    ;org $8b8527
jsr .SR_MakeLeftEggWorm    ; $856E
bra .SR_MakeRightEggDud    ; $38
.LeftDudRightWorm:    ;org $8b852c
jsr .SR_MakeRightEggWorm    ; $8578
bra .SR_MakeLeftEggDud    ; $29
.ReturnFromEgg:    ;org $8b8531
cop #$84 : db $19, $20
cop #$8A
cop #$80 : db $1A
cop #$89
cop #$AB : db $13
cop #$DA : db $09
stz $2E
cop #$C5
.SR_MakeRightEggRunner:
cop #$A5 : dl EFangerEgg_RunnerRight : dw $F800, $0301    ; $8B87E4
rts
.SR_MakeLeftEggRunner:
cop #$A5 : dl EFangerEgg_RunnerLeft : dw $F800, $0301    ; $8B87DA
rts
.SR_MakeLeftEggDud:
cop #$A5 : dl EFangerEgg_DudLeft : dw $F800, $0301    ; $8B8891
rts
.SR_MakeRightEggDud:
cop #$A5 : dl EFangerEgg_DudRight : dw $F800, $0301    ; $8B8896
rts
.SR_MakeLeftEggWorm:
cop #$A5 : dl EFangerEgg_WormLeft : dw $F800, $0111    ; $8B88CD
rts
.SR_MakeRightEggWorm:
cop #$A5 : dl EFangerEgg_WormRight : dw $F800, $0111    ; $8B88DB
rts

;org $8b8582
EFanger_OnDeath:
lda $09AE : bit #$0200 : beq +    ; $03
  cop #$C1
  rtl
+:
lda #$0020 : tsb $09AE
cop #$A5 : dl LR_SetPlayerImmune : dw $0000, $2000    ; $8AA36E
lda #$000A : sta $0000
lda #$0014 : sta $0002
ldy $06
.KillNextPiece:    ; org $8b85aa
lda $0010,y : bit #$2000 : beq ..WithExplosion    ; $08
lda.w #EFangerPiece_DieImmediate : sta $0000,y : bra ..CheckNextPiece    ; $13
..WithExplosion:    ;org $8b85ba
lda.w #EFangerPiece_DieWithExplosion : sta $0000,y
lda $0002 : sta $0008,y
  clc : adc #$0008 : sta $0002   ; 8-frame delay between pieces.
..CheckNextPiece:    ; org $8b85cd
lda $0006,y : tay
dec $0000 : bpl .KillNextPiece    ; $D4    ; (-$2C)
phx
ldx $0056    ; Also kill everything that's dying or has flag $7F:2A & #$0080.
.MaybeKillNextActor:    ; org $8b85da
lda $7F002A,x : bit #$0080 : beq ..CheckNextActor    ; $18
lda $0010,x : bit #$0040 : bne ..CheckNextActor    ; $10
bit #$2000 : beq ++    ; $05
lda.w #EFangerPiece_DieImmediate : bra +    ; $8618 ; $03
++:    ;org $8b85f5
lda.w #EFangerPiece_DieWithExplosion   ; $860C
+:    ; org $8b85f8
sta $0000,x
..CheckNextActor:    ; org $8b85fb
lda $0006,x : beq .DoneDie    ; $03
tax : bra .MaybeKillNextActor    ; $D7    ; (-$29)
.DoneDie:    ;org $8b8603
plx
cop #$DA : db $10
cop #$C7 : dl EBossMonsterManualDeath    ; $8AA43F
EFangerPiece_DieWithExplosion:
cop #$07 : db $06
cop #$A5 : dl $80DF15 : db $00,$10 : dw $0302
EFangerPiece_DieImmediate:
cop #$E0



EFTailPiece_Reset:
cop #$C1
EFTailPiece:   ; org $8b861c
ldy $24
lda $0026,y : bne .Ready
  rtl
.Ready:
ldy $24
lda $0014,y : sta $14
lda $0026,y : dec : sta $0000
lda #$0000 : sta $0026,y
cop #$D9 : dw $0000, .ActionList    ;$863E    ; $8648 $8672 $869C $86C3 $861A
.ActionList:
  dw .FlyUp, .FlyDown
  dw .HorzLeft, .HorzRight
  dw .Reset
;
.FlyUp:    ;org $8b8648
cop #$8D : db $0A
lda $14
  sta $7F0000,x
  sta $7F0002,x
  sta $7F000E,x
..KeepGoing:
jsr SR_Follow04Below    ; $8AF6
ldy $24
lda $0016,y : clc : adc #$00C0 : sta $16
cop #$C2
ldy $24
lda $0026,y : bne .Ready
bra ..KeepGoing
;
.FlyDown:   ;org $8b8672
cop #$8D : db $0E
lda $14
  sta $7F0000,x
  sta $7F0002,x
  sta $7F000E,x
..KeepGoing:
jsr SR_Follow04Above    ; $8B05
ldy $24
lda $0016,y : sec : sbc #$00B0 : sta $16
cop #$C2
ldy $24
lda $0026,y : bne .Ready
bra ..KeepGoing
;
.HorzLeft:   ;org $8b869c
lda #$000A : sta $7F000A,x
ldy $24
lda $0024,y : sta $14
lda #$02E0 : sta $16
jsr SR_SetHorzLeftOrbitVars    ; $8B32
cop #$C8 : dw EFangerPiece_MoveHorzLeft    ; $837D
..DoneAwaitNextAction:
cop #$C1
ldy $24
lda $0026,y : beq +
  jmp .Ready
+:
rtl
;
.HorzRight:   ;org $8b86c3
lda #$000A : sta $7F000A,x
ldy $24
lda $0024,y : sta $14
lda #$02E0 : sta $16
jsr SR_SetHorzRightOrbitVars    ; $8B5C
cop #$C8 : dw EFangerPiece_MoveHorzRight    ; $8422
bra .HorzLeft_DoneAwaitNextAction

;org $8b86df
EFBodyPiece_WhileEgg:
cop #$C1
ldy $24
lda $0026,y : cmp #$0005 : bne +
  rtl
+:
cop #$C1
; org $8b86ee
EFBodyPiece:
ldy $24
lda $0026,y : bne EFBodyPiece_ChooseAttack
  rtl
EFBodyPiece_ChooseAttack:    ;org $8b86f6
ldy $24
lda $0024,y : sta $14
lda $0026,y : dec a : sta $0000
cop #$D9 : dw $0000, .Options   ; $870A ; $8714 $8744 $8774 $879B $86DF
.Options:
  dw EFBodyPiece_FlyUp, EFBodyPiece_FlyDown
  dw EFBodyPiece_HorzLeft, EFBodyPiece_HorzRight
  dw EFBodyPiece_WhileEgg

;org $8b8714
EFBodyPiece_FlyUp:
cop #$8D : db $05
lda $14 : sta $7F0000,x
sta $7F0002,x
sta $7F000E,x
; org $8b8725
.RefreshSprite:
cop #$8B
lda $2A : beq .RefreshSprite    ; $FA    ; (-$06)
lda $08
stz $08
inc a : sta $26
.KeepGoing:    ; org $8b8732
jsr SR_Follow04Below    ; $8AF6
cop #$C2
ldy $24
lda $0026,y : bne EFBodyPiece_ChooseAttack    ; $B8    ; (-$48)
dec $26 : bmi .RefreshSprite    ; $E3    ; (-$1D)
bra .KeepGoing    ; $EE    ; (-$12)

;org $8b8744
EFBodyPiece_FlyDown:
cop #$8D : db $09
lda $14 : sta $7F0000,x
sta $7F0002,x
sta $7F000E,x
; org $8b8755
.RefreshSprite:
cop #$8B
lda $2A : beq .RefreshSprite    ; $FA    ; (-$06)
lda $08
stz $08
inc a : sta $26
.KeepGoing:    ; org $8b8762
jsr SR_Follow04Above    ; $8B05
cop #$C2
ldy $24
lda $0026,y : bne EFBodyPiece_ChooseAttack    ; $88    ; (-$78)
dec $26 : bmi .RefreshSprite    ; $E3    ; (-$1D)
bra .KeepGoing    ; $EE    ; (-$12)

;org $8b8774
EFBodyPiece_HorzLeft:
lda #$0005 : sta $7F000A,x
ldy $24
lda $0024,y : sta $14
lda #$02E0 : sta $16
jsr SR_SetHorzLeftOrbitVars    ; $8B32
cop #$C8 : dw EFangerPiece_MoveHorzLeft    ; $837D
EFBodyPiece_EndHorz:    ; org $8b878e
cop #$C1
ldy $24
lda $0026,y : beq +
  jmp EFBodyPiece_ChooseAttack    ; $86F6
+:
rtl

EFBodyPiece_HorzRight:    ;org $8b879b
lda #$0005 : sta $7F000A,x
ldy $24
lda $0024,y : sta $14
lda #$02E0 : sta $16
jsr SR_SetHorzRightOrbitVars    ; $8B5C
cop #$C8 : dw EFangerPiece_MoveHorzRight    ; $8422
bra EFBodyPiece_EndHorz    ; $D7    ; (-$29)


;org $8b87b7
EFSandVortex:
{
cop #$B6 : db $30
lda #$02D0 : sta $16
cop #$80 : db $1B
cop #$89
cop #$CA : db $3C
  ldy $24
  lda $0014,y : sta $14
  lda $0016,y : cmp #$02C8 : bcc +
cop #$CB
+:
cop #$E0
}

EFangerEgg_RunnerLeft:   ;org $8b87da
lda #$4000 : tsb $12
cop #$AA : db $11
bra +    ; $05
EFangerEgg_RunnerRight:   ;org $8b87e4
{
cop #$AA : db $11
cop #$BB
+:    ; org $8b87e9
lda #$0002 : tsb $12
cop #$8D : db $10
cop #$C8 : dw EFangerEgg_FlyAndLand    ; $89D7
lda #$0101 : trb $10
cop #$80 : db $1C
cop #$89
cop #$07 : db $26
cop #$8D : db $1D
stz $26
EFangerRunner:
.RefreshMovement:    ; org $8b8807
cop #$AC : db $03, $01
.RefreshSprite:    ; org $8b880b
cop #$8B
lda $2A : beq .RefreshMovement    ; $F6    ; (-$0A)
lda $08
stz $08
sta $24
.CheckWallsAndMove:    ; org $8b8817
..CheckEast:
lda $14 : cmp #$02C8 : bcc ..CheckWest    ; $1B
lda #$4000 : tsb $12
lda $26
inc $26
cmp #$0002 : bcs .Die    ; $4D
clc : adc #$001E : sta $28
cop #$8D : db $FF
cop #$BA
bra ..CheckSouth    ; $20
..CheckWest:    ;org $8b8839
lda $14 : cmp #$0038 : bcs ..CheckSouth    ; $19
lda #$4000 : trb $12
lda $26
inc $26
cmp #$0002 : bcs .Die    ; $2B
clc : adc #$001E : sta $28
cop #$8D : db $FF
cop #$BB
..CheckSouth:    ; org $8b8859
lda $16 : cmp #$02F0 : bcc ..CheckNorth    ; $05
  lda #$2000 : tsb $12
..CheckNorth:    ; org $8b8865
lda $16 : cmp #$02B0 : bcs ..OkayMove    ; $05
  lda #$2000 : trb $12
..OkayMove:    ; org $8b8871
cop #$C2
dec $24 : bpl .CheckWallsAndMove    ; $A0    ; (-$60)
bra .RefreshSprite    ; $92    ; (-$6E)
.Die:    ;org $8b8879
cop #$AC : db $13, $45
cop #$DA : db $0A
stz $2C
stz $2E
cop #$80 : db $20
cop #$89
cop #$84 : db $24, $04
cop #$8A
cop #$E0
}


EFangerEgg_DudLeft:   ;org $8b8891
lda #$4000 : tsb $12
EFangerEgg_DudRight:   ;org $8b8896
{
cop #$AA : db $13
cop #$8D : db $21
cop #$C8 : dw EFangerEgg_FlyAndLand    ; $89D7
lda #$0100 : trb $10
cop #$DA : db $13
cop #$84 : db $22, $06
cop #$8A
cop #$07 : db $14
cop #$A5 : dl EFangerEggDudSprite : dw $FD00, $0302    ; $8B88C1
cop #$80 : db $23
cop #$89
cop #$E0
EFangerEggDudSprite:    ;org $8b88c1
cop #$88 : dl $8EE000
cop #$80 : db $07
cop #$89
cop #$E0
}

EFangerEgg_WormLeft:   ;org $8b88cd
lda #$4000 : tsb $12 : bra EFangerEgg_WormRight
;org $8b88d4
lda #$4000 : tsb $12 : bra +$05
EFangerEgg_WormRight:  ;org $8b88db
{
cop #$AA : db $13
bra +
cop #$AA : db $11
+:    ;org $8b88e3
cop #$07 : db $13
cop #$8D : db $10
cop #$C8 : dw EFangerEgg_FlyAndLand    ; $89D7
cop #$07 : db $1D
lda #$ACCC : sta $7F0020,x
lda $81ACCC : and #$00FF : sta $7F0026,x
cop #$07 : db $28
lda #$0010 : trb $10
cop #$80 : db $11
cop #$89
lda #$00B0 : tsb $12
; org $8b8914
EFangerWorm_Main:
lda #$2000 : tsb $10
cop #$23 : and #$007F : clc : adc #$0064 : sta $08
cop #$C2
.GetNewSpawnPos:    ; org $8b8926
cop #$23
pha
  sec : sbc #$007F : clc : adc $09A2 : and #$FFF0 : clc : adc #$0008 : sta $14
pla
  and #$0070 : sec : sbc #$0030 : clc : adc #$02D0 : sta $16
cop #$C2
cop #$13 : dw .GetNewSpawnPos    ; $8926
lda #$2000 : trb $10
cop #$80 : db $12
cop #$89
cop #$84 : db $14, $02
cop #$8A
cop #$21 : db $02 : dw .DoBurrow    ; $8972 ; Burrow if hit player on emerging.
cop #$A5 : dl EFangerWormBullet : dw $F000, $0200    ; $8B8979
cop #$84 : db $14, $02
cop #$8A
.DoBurrow:    ; org $8b8972
cop #$80 : db $13
cop #$89
bra EFangerWorm_Main    ; $9B    ; (-$65)

;org $8b8979
EFangerWormBullet:
cop #$5B : dw $0010
cop #$07 : db $1E
lda #$0002 : sta $7F0014,x
cop #$A2 : dl EChaserAlt : dw $2000    ; $80E4FC
cpy #$1FC0 : beq .DieImmediate    ; $3D
lda $09AA : sta $0024,y
cop #$8D : db $17
.RefreshSprite:    ; org $8b899c
cop #$8B
lda $2A : beq .RefreshSprite    ; $FA    ; (-$06)
lda $08
stz $08
inc : sta $26
; org $8b89a9
.KeepGoing:
lda $14 : cmp #$0030 : bcc .DieWithSparkle    ; $22
  cmp #$02D0 : bcs .DieWithSparkle    ; $1D
lda $16 : cmp #$0294 : bcc .DieWithSparkle    ; $16
  cmp #$02F8 : bcs .DieWithSparkle    ; $11
cop #$C2
lda $10 : bit #$4000 : bne .RefreshSprite    ; $D2    ; (-$2E)
  dec $26 : bpl .KeepGoing    ; $DB    ; (-$25)
bra .RefreshSprite    ; $CC    ; (-$34)
.DieImmediate:    ;org $8b89d0
cop #$E0
.DieWithSparkle:    ;org $8b89d2
cop #$C7 : dl EObjectDeathWithSparkle    ; $80C418
}

;org $8b89d7
EFangerEgg_FlyAndLand:
{
cop #$5B : dw $0080
cop #$B6 : db $30
cop #$63 : db $02, $08, $00
cop #$C1
lda $14 : cmp #$02D0 : bcc +
  lda #$4000 : tsb $12
+:
lda $14 : cmp #$0030 : bcs +
  lda #$4000 : trb $12
+:
cop #$64 : cmp #$0000 : bmi .HasHitGroundDoReturn
  rtl
.HasHitGroundDoReturn:
stz $2C
cop #$C5
}

;org $8b8a09
EFangerPiecesVisibilityManager:
{
lda #$0180 : tsb $12
cop #$A1 : dl EFangerSandEmergeSprite : dw $2300    ; $8B8AD5
sty $20
cop #$C1
ldy $24
lda $0010,y : bit #$0040 : beq +
  jmp .FangerIsDead    ; $8AC7
+:
lda #$000B : sta $0000    ; Number of Pieces.
ldy $06
sty $0002    ; Next Piece in $0002 and in Y.
stz $0004    ; isFangerHurt
lda $0010,y : bit #$0080 : beq .NextPiece
  inc $0004    ; isFangerHurt = 1
.NextPiece:
lda #$02D0 : cmp $0016,y : bcs ..MaybeOnScreen    ; $0B
..NotOnScreen:
lda $0010,y : ora #$2000 : sta $0010,y
bra +    ; $09
..MaybeOnScreen:    ;org $8b8a52
lda $0010,y : and #$DFFF : sta $0010,y
+:
cpy $0002 : beq ..TryNextPiece   ; Don't check for hurt palette if this Piece is the Head.
..MaybeApplyHurtPalette:
lda $000E,y : and #$F1FF : sta $000E,y    ; Reset palette.
lda $0004 : beq ..TryNextPiece    ; $0F
lda $0036 : lsr : bcc ..TryNextPiece    ; $09
lda $000E,y : ora #$0800 : sta $000E,y    ; Set to "hurt" palette.
..TryNextPiece:    ; org $8b8a7d
dec $0000 : bmi .ConsiderEmergeSprite    ; $06
lda $0006,y : tay : bra .NextPiece    ; (-$49)
.ConsiderEmergeSprite:    ;org $8b8a88
lda #$000B : sta $0000    ; Number of Pieces.
ldy $06
..CheckIsNextPieceEmerging:    ; org $8b8a90
lda #$02C8 : sec : sbc $0016,y : bpl +
  eor #$FFFF : inc a
+:
cmp #$000A : bcs ..PieceNotEmerging    ; $1A
phx
ldx $20
lda $0010,x : and #$DFFF : sta $0010,x
lda $0014,y : sta $0014,x
lda #$02D8 : sta $0016,x
plx
rtl
..PieceNotEmerging:    ;org $8b8abc
dec $0000 : bmi .NoEmergeSprite    ; $08
lda $0006,y : tay : bra ..CheckIsNextPieceEmerging    ; $C9    ; (-$37)
.FangerIsDead:    ;org $8b8ac7
cop #$C1
.NoEmergeSprite:    ; org $8b8ac9
ldy $20
lda $0010,y : ora #$2000 : sta $0010,y
rtl

EFangerSandEmergeSprite:    ;org $8b8ad5
lda #$2000 : trb $10
.Refresh:
cop #$80 : db $16
cop #$89
bra .Refresh
}

;org $8b8ae1
SR_SetFangerVertFlySineParams:
lda #$0000 : sta $7F0010,x
lda #$0020 : sta $7F0012,x
lda $14 : sta $7F100C,x
rts

;org $8b8af6
SR_Follow04Below:
ldy $04
jsr SR_AdvanceSavedXPosList    ; $8B14
lda $0016,y : clc : adc #$0010 : sta $16
rts

;org $8b8b05
SR_Follow04Above:
ldy $04
jsr SR_AdvanceSavedXPosList    ; $8B14
lda $0016,y : sec : sbc #$0010 : sta $16
rts

;org $8b8b14
SR_AdvanceSavedXPosList:
lda $7F0000,x : sta $14
lda $7F0002,x : sta $7F0000,x
lda $7F000E,x : sta $7F0002,x
lda $0014,y : sta $7F000E,x
rts

;org $8b8b32
SR_SetHorzLeftOrbitVars:
lda #$0000 : sta $7F000E,x
lda $14 : sec : sbc #$0050 : sta $7F0018,x
lda $16 : sta $7F001A,x
lda #$4040 : sta $7F0010,x
sta $7F0002,x
lda #$FFA0 : sta $7F0012,x
rts

;org $8b8b5c
SR_SetHorzRightOrbitVars:
lda #$0000 : sta $7F000E,x
lda $14 : clc : adc #$0050 : sta $7F0018,x
lda $16 : sta $7F001A,x
lda #$C0C0 : sta $7F0010,x
  sta $7F0002,x
lda #$FFA0 : sta $7F0012,x
rts

;org $8b8b86
SR_SetPieceHorzMoveDelays:
lda $7F100C,x : beq +
  rts
+:
inc : sta $7F100C,x
lda #$0000 : sta $7F000A,x
lda #$000A : sta $0000    ; numPieces, +1 for the tail.
lda #$0004 : sta $0002    ; Base delay for first piece.
ldy $06
.NextPiece:    ; org $8b8ba7
lda $0002 : sta $0008,y
clc : adc #$0003 : sta $0002   ; Each piece is 3 frames behind the previous one.
lda $0006,y : tay
dec $0000 : bpl .NextPiece    ; $EA    ; (-$16)
rts

;org $8b8bbe
SR_FangerSpawnSoundAndVortex:
cop #$07 : db $27
cop #$A5 : dl EFSandVortex : dw $0000, $0301    ; $8B87B7
rts

;org $8b8bcb
SR_FangerSetSpawnPtForVert:
lda $09A2 : cmp #$00F8 : bcs .PlayerNotFarLeft
.PlayerIsFarLeft:
lda #$0088 : bra .DoRandomize
.PlayerNotFarLeft:    ;org $8b8bd8
cmp #$01F8 : bcs .PlayerIsFarRight
.PlayerInMiddle:
lda #$0188 : bra .DoRandomize
.PlayerIsFarRight:    ;org $8b8be2
lda #$0288
.DoRandomize:    ; org $8b8be5
sta $14
cop #$23 : and #$003F : sec : sbc #$001F : clc : adc $14
  sta $14
  sta $24
rts
warnpc $8b8bf8


org $8b8dbe
db $00 : dw $0000
EGWFloorFireball:
cop #$27 : db $07
lda #$0001 : tsb $12
cop #$80 : db $03
cop #$89
lda #$0001 : trb $12
lda $10 : bit #$4000 : bne EGWFloorFireball
cop #$21 : db $04 : dw B_8B8E29
J_8B8DDF:    ; org $8b8ddf
cop #$2A : dw $0000, B_8B8DEA, B_8B8DEA, B_8B8DF2
rtl
B_8B8DEA:    ; org $8b8dea
cop #$8D : db $02
lda #$FFE0
bra J_8B8DFD
B_8B8DF2:    ; org $8b8df2
cop #$8D : db $82
lda #$0002 : tsb $12
lda #$0020
J_8B8DFD:    ; org $8b8dfd
clc : adc $14 : sta $7F0018,x
cop #$23 : and #$003F : sec : sbc #$001F : clc : adc $16 : sta $7F001A,x
lda #$0008 : tsb $10
cop #$22 : db $FF, $01
lda #$0008 : trb $10
lda #$0002 : trb $12
bra EGWFloorFireball
B_8B8E29:    ; org $8b8e29
lda #$0001 : tsb $12
cop #$84 : db $0F, $02
cop #$8A
cop #$CA : db $03
cop #$80 : db $0F
cop #$89
cop #$23
cop #$9E : dl C_8B8E67 : dw $0000, $FFF6, $0302
cop #$9E : dl C_8B8E6C : dw $0000, $FFF6, $0302
cop #$07 : db $1E
cop #$CB
cop #$84 : db $00, $02
cop #$8A
lda #$0001 : trb $12
jmp J_8B8DDF
C_8B8E67:    ; org $8b8e67
lda #$4000 : tsb $12
C_8B8E6C:    ; org $8b8e6c
cop #$63 : db $02, $0A, $00
pea $8E90
lda $0410 : and #$0003 : bne B_8B8E80
cop #$AA : db $00
rts
B_8B8E80:    ; org $8b8e80
dec : bne B_8B8E86
cop #$AA : db $13
B_8B8E86:    ; org $8b8e86
dec : bne B_8B8E8D
cop #$AA : db $11
rts
B_8B8E8D:    ; org $8b8e8d
cop #$AA : db $13
rts
Q_8B8E91:    ; org $8b8e91
cop #$23 : and #$001F : sta $24
lda $12 : bit #$4000 : beq B_8B8EA7
lda $24 : eor #$FFFF : inc a : sta $24
B_8B8EA7:    ; org $8b8ea7
lda $24 : clc : adc $16 : sta $7F001A,x
cop #$8D : db $04
J_8B8EB3:    ; org $8b8eb3
cop #$8B
lda $08
stz $08
inc : sta $24
cop #$C1
lda $2A : bne B_8B8EC8
cop #$B1
stz $2E
bra J_8B8EB3
B_8B8EC8:    ; org $8b8ec8
cop #$C1
cop #$64
cmp #$0000 : bmi B_8B8ED6
dec $24 : bmi J_8B8EB3
rtl
B_8B8ED6:    ; org $8b8ed6
lda #$0102 : trb $10
stz $2C
stz $2E
cop #$5D : dw $8EF0
cop #$83 : db $04, $47, $45
cop #$89
cop #$84 : db $04, $02
cop #$8A
cop #$E0
warnpc $8b8ef2




org $8b9155
db $07 : dw $0000
EGWArcherFacingWest:
cop #$58 : dw EGWArcherMobile
J_8B915C:    ; org $8b915c
cop #$27 : db $09
cop #$C8 : dw B_8B91AF
bra J_8B915C
;org $8b9165
db $07 : dw $0000
EGWArcherFacingEast:
cop #$BB
cop #$58 : dw EGWArcherMobile
-:
cop #$27 : db $09
cop #$C8 : dw B_8B91C6
bra -

db $05 : dw $0000
EGWArcherMobile:    ; org $8b917a
cop #$27 : db $09
cop #$C6 : dw B_8B918B
cop #$2A : dw $0000, B_8B91AF, B_8B91AF, B_8B91C6
B_8B918B:    ; org $8b918b
lda $10 : bit #$4000 : bne EGWArcherMobile
cop #$C6 : dw B_8B918B
cop #$21 : db $04 : dw B_8B91FF
cop #$2B : dw $000E, B_8B91DD, B_8B91A5, B_8B91E9
B_8B91A5:    ; org $8b91a5
cop #$2A : dw $0000, B_8B91AF, B_8B91AF, B_8B91C6
B_8B91AF:    ; org $8b91af
cop #$80 : db $0B
cop #$89
cop #$9E : dl C_8B926C : dw $0000, $FFF5, $0300
cop #$80 : db $0E
cop #$89
cop #$C5
B_8B91C6:    ; org $8b91c6
cop #$80 : db $8B
cop #$89
cop #$9E : dl C_8B9253 : dw $0000, $FFF5, $0300
cop #$80 : db $8E
cop #$89
cop #$C5
B_8B91DD:    ; org $8b91dd
cop #$15 : dw J_8B91F5
cop #$82 : db $09, $12
cop #$89
cop #$C5
B_8B91E9:    ; org $8b91e9
cop #$16 : dw J_8B91F5
cop #$82 : db $08, $11
cop #$89
cop #$C5
J_8B91F5:    ; org $8b91f5
cop #$2A : dw $0000, B_8B91AF, B_8B91AF, B_8B91C6
B_8B91FF:    ; org $8b91ff
cop #$2A : dw $0000, B_8B922E, B_8B922E, B_8B9209
B_8B9209:    ; org $8b9209
cop #$CA : db $02
cop #$17 : dw J_8B91F5
cop #$8D : db $8A
cop #$AA : db $04
cop #$C1
cop #$8C : db $02
cop #$C2 : stz $2C
cop #$17 : dw J_8B91F5
cop #$AA : db $04
cop #$C1
cop #$89
cop #$CB : bra J_8B91F5
B_8B922E:    ; org $8b922e
cop #$CA : db $02
cop #$18 : dw J_8B91F5
cop #$8D : db $0A
cop #$AA : db $03
cop #$C1
cop #$8C : db $02
cop #$C2 : stz $2C
cop #$18 : dw J_8B91F5
cop #$AA : db $03
cop #$C1
cop #$89
cop #$CB : bra J_8B91F5
C_8B9253:    ; org $8b9253
cop #$5E : dw $92E9
cop #$5B : dw $0010
cop #$A2 : dl C_8B931A : dw $2000
cop #$80 : db $8C
cop #$89
cop #$AA : db $05 : bra J_8B9283
C_8B926C:    ; org $8b926c
cop #$5E : dw $92F9
cop #$5B : dw $0010
cop #$A2 : dl C_8B9375 : dw $2000
cop #$80 : db $0C
cop #$89
cop #$AA : db $06
J_8B9283:    ; org $8b9283
cop #$07 : db $1E
lda #$0064 : sta $24
cop #$C1
cop #$62 : db $0F, $A8, $92
dec $24 : bmi B_8B9297
rtl
B_8B9297:    ; org $8b9297
cop #$C1
cop #$62 : db $0F, $A8, $92
lda $10 : bit #$4000 : bne B_8B92A6
rtl
B_8B92A6:    ; org $8b92a6
cop #$E0
warnpc $8b92a8

org $8b931a
C_8B931A:
ldy $09AA
lda $0010,y : bit #$0040 : beq B_8B9328
cop #$C1
rtl
B_8B9328:    ; org $8b9328
bit #$2280 : beq B_8B932E
rtl
B_8B932E:    ; org $8b932e
lda #$0000
jsr S_8B9408
clc : adc #$0008 : bpl B_8B933E
  eor #$FFFF : inc a
B_8B933E:    ; org $8b933e
cmp #$0005 : bcc B_8B9344
rtl
B_8B9344:    ; org $8b9344
lda $0016,y : sec : sbc #$0014 : sec : sbc $001C : bpl B_8B9355
  eor #$FFFF : inc a
B_8B9355:    ; org $8b9355
cmp #$000F : bcc B_8B935B
rtl
B_8B935B:    ; org $8b935b
lda #$0F00 : tsb $065A
phy
lda #$0002
ldy #$0003
jsl $80C397
ply
lda #$92DC
jsr S_8B93FB : bra J_8B93C8
C_8B9375:    ; org $8b9375
ldy $09AA
lda $0010,y : bit #$0040 : beq B_8B9383
cop #$C1
rtl
B_8B9383:    ; org $8b9383
bit #$2280 : beq B_8B9389
rtl
B_8B9389:    ; org $8b9389
lda #$0010
jsr S_8B9408 : sec : sbc #$0008 : bpl B_8B9399
  eor #$FFFF : inc a
B_8B9399:    ; org $8b9399
cmp #$0005 : bcc B_8B939F
rtl
B_8B939F:    ; org $8b939f
lda $0016,y : sec : sbc #$0014 : sec : sbc $001C : bpl B_8B93B0
  eor #$FFFF : inc a
B_8B93B0:    ; org $8b93b0
cmp #$000F : bcc B_8B93B6
rtl
B_8B93B6:    ; org $8b93b6
phy
lda #$0002
ldy #$0002
jsl $80C397
ply
lda #$92CF
jsr S_8B93FB
J_8B93C8:    ; org $8b93c8
phx
ldx $09AA
lda $0014,y : sec : sbc $0014,x : sta $14
lda $0016,y : sec : sbc $0016,x : sta $16
plx
cop #$C1
phx
ldx $09AA
ldy $24
lda $0014,x : clc : adc $14 : sta $0014,y
lda $0016,x : clc : adc $16 : sta $0016,y
plx
rtl
S_8B93FB:    ; org $8b93fb
sta $0000,y
lda #$0000 : sta $0008,y : sta $002C,y
rts
S_8B9408:    ; org $8b9408
clc : adc $09A2 : sta $0018
lda $09A4 : sec : sbc #$0001 : sta $001C
ldy $24
lda $0014,y : sec : sbc $0018
rts
warnpc $8b9423


org $8B983B
db $00 : dw $0000
EKressFlutist:


org $8b9ba2
db $03 : dw $0000
EKressWavingSkullNorth:
lda #$2000 : tsb $12
bra EKressWavingSkullSouth

;org $8B9BAC
db $02 : dw $0000
EKressWavingSkullSouth:
lda #$0010 : tsb $12
cop #$27 : db $08
lda #$0000 : sta $7F0010,x
lda #$0040 : sta $7F0012,x
lda #$0150 : sta $7F100E,x
lda $14 : sta $7F100C,x
J_8B9BD2:    ; org $8b9bd2
lda $16 : sta $26
B_8B9BD6:    ; org $8b9bd6
cop #$AB : db $01
J_8B9BD9:    ; org $8b9bd9
cop #$C1
cop #$8B
lda $2A : beq B_8B9BD6
lda $08 : inc a : sta $24
stz $08
jsr SR_ScaledSine8B : clc : adc $7F100C,x : sta $14
lda $7F0010,x : sec : sbc #$0002 : and #$00FF : sta $7F0010,x
lda $26 : sec : sbc $16 : bpl +
  eor #$FFFF : inc a
+:    ; org $8b9c0c
cmp $7F100E,x : beq B_8B9C19
dec $24 : bmi +
  rtl
+:    ; org $8b9c17
bra J_8B9BD9
B_8B9C19:    ; org $8b9c19
stz $2E
lda $12 : bit #$2000 : bne B_8B9C33
cop #$80 : db $04
cop #$89
cop #$80 : db $03
cop #$89
lda #$2000 : tsb $12
bra J_8B9BD2
B_8B9C33:    ; org $8b9c33
cop #$80 : db $84
cop #$89
cop #$80 : db $02
cop #$89
lda #$2000 : trb $12
bra J_8B9BD2

;org $8b9c44
db $04 : dw $0000
EKressWavingSkullWest:
lda #$4000 : tsb $12
bra +

;org $8B9C4E
db $04 : dw $0000
EKressWavingSkullEast:
cop #$BB
+:
lda #$0010 : tsb $12
cop #$27 : db $08
lda #$0000 : sta $7F0010,x
lda #$0040 : sta $7F0012,x
lda #$0150 : sta $7F100E,x
lda $16 : sta $7F100C,x
J_8B9C76:    ; org $8b9c76
lda $14 : sta $26
B_8B9C7A:    ; org $8b9c7a
cop #$AA : db $01
J_8B9C7D:    ; org $8b9c7d
cop #$C1
cop #$8B
lda $2A : beq B_8B9C7A
lda $08 : inc a : sta $24
stz $08
jsr SR_ScaledSine8B : clc : adc $7F100C,x : sta $16
lda $7F0010,x : sec : sbc #$0002 : and #$00FF : sta $7F0010,x
lda $26 : sec : sbc $14 : bpl +
  eor #$FFFF : inc a
+:    ; org $8b9cb0
cmp $7F100E,x : beq B_8B9CBD
dec $24 : bmi +
  rtl
+:    ; org $8b9cbb
bra J_8B9C7D
B_8B9CBD:    ; org $8b9cbd
stz $2C
lda $12 : bit #$4000 : bne B_8B9CD7
cop #$80 : db $03
cop #$89
cop #$80 : db $04
cop #$89
lda #$4000 : tsb $12
bra J_8B9C76
B_8B9CD7:    ; org $8b9cd7
cop #$80 : db $02
cop #$89
cop #$80 : db $84
cop #$89
lda #$4000 : trb $12
bra J_8B9C76

;org $8B9CE8
SR_ScaledSine8B:    ; Returns $7F:12 * sin($7F:10).
lda $7F0010,x : tay
sep #$20
clc
lda $C455,y
bpl +
  eor #$FF : inc a
  sec
+:
xba
lda $7F0012,x
jsl LR_MultiplyBytesOfA    ; $8281D1
rep #$20
xba
and #$00FF
bcc +
  eor #$FFFF : inc a
+:
rts

;org $8b9d0f
db $02 : dw $0000
EKressShootingSkullSouth:
cop #$B7 : db $02
lda #$0011 : tsb $12
.SleepTenFramesFromWest:    ; org $8b9d1a
cop #$27 : db $09
.SleepOrActFromWest:    ; org $8b9d1d
lda $10 : bit #$4000 : bne .SleepTenFramesFromWest
cop #$2B : dw $0000, EKressShootingSkullNorth_PlayerIsNorthFromWest, .PlayerIsSouthFromWest, .PlayerIsSouthFromWest
.PlayerIsSouthFromWest:    ; org $8b9d2e
cop #$44 : db $FF, $00, $01, $08 : dw .FireFromWest
.SwayEast:    ; org $8b9d36
cop #$80 : db $02
cop #$89
cop #$85 : db $02, $02, $01
cop #$8A
bra .SleepOrActFromEast
.FireFromWest:    ; org $8b9d44
cop #$C8 : dw .DoFire
cop #$84 : db $02, $02
cop #$8A
bra .SwayEast
.SleepTenFramesFromEast:    ; org $8b9d50
cop #$27 : db $0A
.SleepOrActFromEast:    ; org $8b9d53
lda $10 : bit #$4000 : bne .SleepTenFramesFromEast
cop #$2B : dw $0000, EKressShootingSkullNorth_PlayerIsNorthFromEast, .PlayerIsSouthFromEast, .PlayerIsSouthFromEast
.PlayerIsSouthFromEast:    ; org $8b9d64
cop #$44 : db $FF, $00, $01, $08 : dw .FireFromEast
.SwayWest:    ; org $8b9d6c
cop #$80 : db $02
cop #$89
cop #$85 : db $02, $02, $02
cop #$8A
bra .SleepOrActFromWest
.FireFromEast:    ; org $8b9d7a
cop #$C8 : dw .DoFire
cop #$84 : db $02, $02
cop #$8A
bra .SwayWest
.DoFire:    ; org $8b9d86
cop #$84 : db $1A, $06
cop #$8A
cop #$9E : dl EKressSkullBulletSouth : dw $FFFD, $FFF8, $0202
cop #$9E : dl EKressSkullBulletSouth : dw $0004, $FFF8, $0202
cop #$80 : db $02
cop #$89
cop #$C5
EKressSkullBulletSouth:    ; org $8b9da9
cop #$07 : db $1D
cop #$B7 : db $02
cop #$5B : dw $0010
cop #$82 : db $20, $03
cop #$89
lda #$0002 : trb $10
.KeepGoing:    ; org $8b9dbe
cop #$82 : db $20, $03
cop #$89
lda $10 : bit #$4000 : beq .KeepGoing
cop #$E0

;org $8b9dcd
db $03 : dw $0000
EKressShootingSkullNorth:
cop #$B7 : db $02
lda #$0011 : tsb $12
.SleepTenFramesFromWest:    ; org $8b9dd8
cop #$27 : db $09
.SleepOrActFromWest:    ; org $8b9ddb
lda $10 : bit #$4000 : bne .SleepTenFramesFromWest
cop #$2B : dw $0000, .PlayerIsNorthFromWest, .PlayerIsNorthFromWest, EKressShootingSkullSouth_PlayerIsSouthFromWest
.PlayerIsNorthFromWest:    ; org $8b9dec
cop #$44 : db $FF, $F8, $01, $00 : dw .FireFromWest
.SwayEast:    ; org $8b9df4
cop #$80 : db $03
cop #$89
cop #$85 : db $03, $02, $01
cop #$8A
bra .SleepOrActFromEast
.FireFromWest:    ; org $8b9e02
cop #$C8 : dw .DoFire
cop #$84 : db $03, $02
cop #$8A
bra .SwayEast
.SleepTenFramesFromEast:    ; org $8b9e0e
cop #$27 : db $0A
.SleepOrActFromEast:    ; org $8b9e11
lda $10 : bit #$4000 : bne .SleepTenFramesFromEast
cop #$2B : dw $0000, .PlayerIsNorthFromEast, .PlayerIsNorthFromEast, EKressShootingSkullSouth_PlayerIsSouthFromEast
.PlayerIsNorthFromEast:    ; org $8b9e22
cop #$44 : db $FF, $F8, $01, $00 : dw .FireFromEast
.SwayWest:    ; org $8b9e2a
cop #$80 : db $03
cop #$89
cop #$85 : db $03, $02, $02
cop #$8A
bra .SleepOrActFromWest
.FireFromEast:    ; org $8b9e38
cop #$C8 : dw .DoFire
cop #$84 : db $03, $02
cop #$8A
bra .SwayWest
.DoFire:    ; org $8b9e44
cop #$84 : db $1B, $06
cop #$8A
cop #$9E : dl EKressSkullBulletNorth : dw $FFFD, $FFF8, $0200
cop #$9E : dl EKressSkullBulletNorth : dw $0004, $FFF8, $0200
cop #$80 : db $03
cop #$89
cop #$C5
EKressSkullBulletNorth:    ; org $8b9e67
cop #$07 : db $1D
cop #$B7 : db $02
cop #$5B : dw $0010
cop #$82 : db $20, $04
cop #$89
lda #$0002 : trb $10
.KeepGoing:    ; org $8b9e7c
cop #$82 : db $20, $04
cop #$89
lda $10 : bit #$4000 : beq .KeepGoing
cop #$E0

warnpc $8b9e8b



org $8b9e96
#B_8B9E96:
cop #$27 : db $09
J_8B9E99:    ; org $8b9e99
lda $10 : bit #$4000 : bne B_8B9E96
cop #$2A : dw $0000, B_8B9EAA, B_8B9EAA, B_8B9F74
B_8B9EAA:    ; org $8b9eaa
cop #$80 : db $04
cop #$89
cop #$44 : db $F8, $FF, $00, $01 : dw B_8B9EC5
J_8B9EB7:    ; org $8b9eb7
cop #$80 : db $04
cop #$89
cop #$86 : db $04, $02, $01
cop #$8A
bra J_8B9ED4
B_8B9EC5:    ; org $8b9ec5
cop #$C8 : dw B_8B9F0C
cop #$84 : db $04, $02
cop #$8A
bra J_8B9EB7
B_8B9ED1:    ; org $8b9ed1
cop #$27 : db $0A
J_8B9ED4:    ; org $8b9ed4
lda $10 : bit #$4000 : bne B_8B9ED1
cop #$2A : dw $0000, B_8B9EE5, B_8B9EE5, B_8B9FAF
B_8B9EE5:    ; org $8b9ee5
cop #$80 : db $04
cop #$89
cop #$44 : db $F8, $FF, $00, $01 : dw B_8B9F00
J_8B9EF2:    ; org $8b9ef2
cop #$80 : db $04
cop #$89
cop #$86 : db $04, $02, $02
cop #$8A
bra J_8B9E99
B_8B9F00:    ; org $8b9f00
cop #$C8 : dw B_8B9F0C
cop #$84 : db $04, $02
cop #$8A
bra J_8B9EF2
B_8B9F0C:    ; org $8b9f0c
cop #$84 : db $1C, $06
cop #$8A
cop #$9E : dl C_8B9F2F : dw $FFFA, $FFF8, $0202
cop #$9E : dl C_8B9F2F : dw $FFFA, $FFF6, $0202
cop #$80 : db $04
cop #$89
cop #$C5
C_8B9F2F:    ; org $8b9f2f
cop #$07 : db $1D
cop #$B7 : db $02
cop #$5B : dw $0010
cop #$81 : db $20, $04
cop #$89
lda #$0002 : trb $10
B_8B9F44:    ; org $8b9f44
cop #$81 : db $20, $04
cop #$89
lda $10 : bit #$4000 : beq B_8B9F44
cop #$E0
warnpc $8b9f53

org $8b9f60
#B_8B9F60:
cop #$27 : db $09
J_8B9F63:    ; org $8b9f63
lda $10 : bit #$4000 : bne B_8B9F60
cop #$2A : dw $0000, B_8B9EAA, B_8B9F74, B_8B9F74
B_8B9F74:    ; org $8b9f74
cop #$80 : db $84
cop #$89
cop #$44 : db $00, $FF, $08, $01 : dw B_8B9F8F
J_8B9F81:    ; org $8b9f81
cop #$80 : db $84
cop #$89
cop #$86 : db $84, $02, $01
cop #$8A
bra J_8B9F9E
B_8B9F8F:    ; org $8b9f8f
cop #$C8 : dw B_8B9FD6
cop #$84 : db $84, $02
cop #$8A
bra J_8B9F81
B_8B9F9B:    ; org $8b9f9b
cop #$27 : db $0A
J_8B9F9E:    ; org $8b9f9e
lda $10 : bit #$4000 : bne B_8B9F9B
cop #$2A : dw $0000, B_8B9EE5, B_8B9FAF, B_8B9FAF
B_8B9FAF:    ; org $8b9faf
cop #$80 : db $84
cop #$89
cop #$44 : db $00, $FF, $08, $01 : dw B_8B9FCA
J_8B9FBC:    ; org $8b9fbc
cop #$80 : db $84
cop #$89
cop #$86 : db $84, $02, $02
cop #$8A
bra J_8B9F63
B_8B9FCA:    ; org $8b9fca
cop #$C8 : dw B_8B9FD6
cop #$84 : db $84, $02
cop #$8A
bra J_8B9FBC
B_8B9FD6:    ; org $8b9fd6
cop #$84 : db $9C, $06
cop #$8A
cop #$9E : dl C_8B9FF9 : dw $0006, $FFF8, $0202
cop #$9E : dl C_8B9FF9 : dw $0006, $FFF6, $0202
cop #$80 : db $84
cop #$89
cop #$C5
C_8B9FF9:    ; org $8b9ff9
cop #$07 : db $1D
cop #$B7 : db $02
cop #$5B : dw $0010
cop #$81 : db $20, $03
cop #$89
lda #$0002 : trb $10
B_8BA00E:    ; org $8ba00e
cop #$81 : db $20, $03
cop #$89
lda $10 : bit #$4000 : beq B_8BA00E
cop #$E0
warnpc $8ba01d


org $8ba61a
db $00 : dw $0000
EBabelMummyQueen:


org $8ba6b6
db $00 : dw $0000
EMummyQueen:
lda #$0004 : jsl LR_SecOnDefeatedBossA : bcc +
  stz $0AEC
  stz $0AEE
  cop #$E0
+:
lda #$8191 : tsb $12
ldy $09AA
lda $0012,y : ora #$0008 : sta $0012,y
lda #$0A0A : sta $20
lda #$1858 : sta $22
lda #$0000 : sta $7F0010,x
cop #$A2 : dl C_8AFD69 : dw $2000
tya : sta $7F1016,x
cop #$57 : dl EMummyQueen_OnDeath

EMummyQueen_ChooseAttack:    ; org $8ba6fd
lda $7F0010,x : cmp #$0002 : bcc +
cop #$58 : dw EMummyQueen_TryGhostWheel
bra ++
+:
cop #$58 : dw EMummyQueen_TryGhostScatter
++:    ; org $8ba710
cop #$C6 : dw EMummyQueen_ChooseAttack
cop #$23 : and #$0007 : sta $0000
cop #$D9 : dw $0000, EMummyQueen_AttackOptions   ; $A722
EMummyQueen_AttackOptions:
  dw EMummyQueen_AttackQuake, EMummyQueen_AttackQuake
  dw EMummyQueen_AttackOrb, EMummyQueen_AttackOrb
  dw EMummyQueen_AttackFly, EMummyQueen_AttackFly
  dw EMummyQueen_AttackFly, EMummyQueen_AttackFly

EMummyQueen_AttackFly:    ; org $8ba732
lda $7F0010,x : clc : adc #$0000 : sta $28
cop #$8D : db $FF
cop #$23
pha
  and #$003F : sec : sbc #$001F : clc : adc $09A2 : sta $7F0018,x
pla
lsr : lsr : sec : sbc #$001F : clc : adc $09A4 : sta $7F001A,x
cop #$52 : db $FF, $01, $FF
cop #$53
cop #$C5

EMummyQueen_AttackOrb:    ; org $8ba769
cop #$9A : dl EMummyQueenOrb : dw $2202
lda $7F0010,x : clc : adc #$0000 : sta $28
cop #$84 : db $FF, $0A
cop #$8A
cop #$C5

EMummyQueenOrb:    ; org $8ba782
cop #$BC : db $0C, $B2
lda #$2000 : trb $10
cop #$07 : db $1E
cop #$80 : db $13
cop #$89
cop #$07 : db $20
lda #$0004 : clc : adc $0B02 : sta $7F0014,x
cop #$A2 : dl EChaserAlt : dw $2000    ; $80e4fc
lda $09AA : sta $0024,y
.KeepGoing:    ; org $8ba7ae
cop #$84 : db $0C, $08
cop #$8A
lda $10 : bit #$4000 : beq .KeepGoing
cop #$E0

EMummyQueen_TryGhostWheel:    ; org $8ba7bd
lda #$0007 : sta $26
-:
cop #$9E : dl EMummyQueenWheelGhost : dw $0000, $FFFC, $2200
lda #$0000 : sta $0026,y
dec $26 : bpl -
lda #$0001 : sta $0026,y
lda #$0200 : tsb $10
cop #$07 : db $0C
lda $7F0010,x : clc : adc #$0009 : sta $28
cop #$80 : db $FF
cop #$89
lda #$2000 : tsb $10
lda #$0008 : tsb $12
lda #$0001 : sta $7F0018,x
lda #$0001 : sta $7F001A,x
cop #$C2
lda $26 : beq B_8BA829
jsr S_8BA842
jsr S_8BA876
lda $7F0018,x : sta $7F002C,x
lda $7F001A,x : sta $7F002E,x
rtl
B_8BA829:    ; org $8ba829
lda #$0008 : trb $12
lda #$00FF : sta $24
lda #$0007 : sta $0000
lda.w #EConvergeOn26 : jsr SR_SetGhostPointersToA    ; pointers to #$ac7f
jmp EMummyQueen_Appear

S_8BA842:    ; org $8ba842
lda $7F0018,x : bpl B_8BA85F
lda $14 : bmi B_8BA852
  cmp #$0050 : bcc B_8BA852
rts
B_8BA852:
lda $7F0018,x : eor #$FFFF : inc : sta $7F0018,x
rts
B_8BA85F:
lda $14 : bmi B_8BA868
  cmp #$01B0 : bcs B_8BA869
B_8BA868:
rts
B_8BA869:
lda $7F0018,x : eor #$FFFF : inc : sta $7F0018,x
rts

S_8BA876:    ; org $8ba876
lda $7F001A,x : bpl B_8BA893
lda $16 : bmi B_8BA886
  cmp #$0080 : bcc B_8BA886
rts
B_8BA886:
lda $7F001A,x : eor #$FFFF : inc : sta $7F001A,x
rts
B_8BA893:
lda $16 : bmi B_8BA89C
  cmp #$01B0 : bcs B_8BA89D
B_8BA89C:
rts
B_8BA89D:
lda $7F001A,x : eor #$FFFF : inc : sta $7F001A,x
rts

EMummyQueen_TryGhostScatter:    ; org $8ba8aa
lda #$0007 : sta $26
-:
cop #$9E : dl EMummyQueenScatterGhost : dw $0000, $FFFC, $2200
dec $26 : bpl -
stz $26
lda #$0200 : tsb $10
lda #$00FF : sta $24
cop #$07 : db $0C
lda $7F0010,x : clc : adc #$0009 : sta $28
cop #$80 : db $FF
cop #$89
lda #$2000 : tsb $10
lda $0B02 : xba : lsr : lsr : clc : adc #$0168 : sta $08
cop #$C2
lda #$0007 : sta $0000
lda #$AC7D : jsr S_8BAA63
EMummyQueen_Appear:    ; org $8ba8fb
cop #$C1
lda $24 : beq +
  rtl
+:
lda #$0007 : sta $0000
lda #$ACAF : jsr SR_SetGhostPointersToA
lda $7F0026,x
  cmp #$0014 : bcc .LowHealth
  cmp #$001E : bcc .MidHealth
  bra .DoAppear
.MidHealth:    ; org $8ba91e
lda $7F0010,x : cmp #$0001 : beq .DoAppear
lda #$0001 : sta $7F0010,x
cop #$3B : db $5C : dl TIndexedPaletteBundleOnce    ; $80B519
bra .DoAppear
.LowHealth:    ; org $8ba936
lda $7F0010,x : cmp #$0002 : beq .DoAppear
lda #$0002 : sta $7F0010,x
cop #$3B : db $5D : dl TIndexedPaletteBundleOnce    ; $80B519
bra .DoAppear
.DoAppear:    ; org $8ba94e
cop #$07 : db $29
lda #$2000 : trb $10
lda $7F0010,x : clc : adc #$0010 : sta $28
cop #$80 : db $FF
cop #$89
lda #$0200 : trb $10
jmp EMummyQueen_ChooseAttack

EMummyQueen_AttackQuake:    ; org $8ba96d
cop #$58 : dw .OnHitCancel
cop #$07 : db $15
lda $7F0010,x : clc : adc #$0003 : sta $28
cop #$80 : db $FF
cop #$89
lda $28 : clc : adc #$0003 : sta $28
cop #$80 : db $FF
cop #$89
cop #$A2 : dl EMummyQueenQuake : dw $2800
cop #$84 : db $FF, $0A
cop #$8A
ldy $06
lda #$0001 : sta $0024,y
lda $7F0010,x : clc : adc #$0000 : sta $28
cop #$84 : db $FF, $12
cop #$8A
cop #$C5
.OnHitCancel:
ldy $06
lda #$0001 : sta $0024,y
jmp EMummyQueen_TryGhostScatter

EMummyQueen_OnDeath:    ; org $8ba9c2
ldy $06
lda #$0001 : sta $0024,y
lda $09AE : bit #$0200 : beq .PlayerAlive
.PlayerDying:
cop #$C1
rtl
.PlayerAlive:    ; org $8ba9d5
lda #$0020 : tsb $09AE   ; Make player not die at 0 HP.
cop #$A5 : dl LR_SetPlayerImmune : dw $0000, $2000
cop #$A5 : dl EMummyQueenExplosionFactory : dw $E000, $2300
cop #$DA : db $3B
cop #$E0

EMummyQueenExplosionFactory:    ; org $8ba9f2
cop #$88 : dl $8EE000
cop #$CA : db $0C
cop #$A5 : dl EMummyQueenExplosion07 : dw $0000, $0302
cop #$DA : db $01
cop #$A5 : dl EMummyQueenExplosion01 : dw $0000, $0302
cop #$DA : db $03
cop #$CB
cop #$C7 : dl EBasicMonsterDeath

EMummyQueenExplosion07:    ; org $8baa19
jsr SR_SetRandomMQExplosionPos
cop #$80 : db $07
cop #$89
cop #$E0

EMummyQueenExplosion01:    ; org $8baa23
jsr SR_SetRandomMQExplosionPos
cop #$80 : db $01
cop #$89
cop #$E0

SR_SetRandomMQExplosionPos:    ; org $8baa2d
cop #$23 : and #$003F : sec : sbc #$001F : clc : adc $14 : sta $14
cop #$23 : and #$007F : sec : sbc #$003F : clc : adc $16 : sta $16
rts

SR_SetGhostPointersToA:    ; org $8baa4a
ldy $06
pha
.NextGhost:
lda #$0000 : sta $0008,y
lda $01,s : sta $0000,y
lda $0006,y : tay
dec $0000 : bpl .NextGhost
pla
rts

S_8BAA63:    ; org $8baa63
ldy $06
stz $0018
stz $001C
pha
B_8BAA6C:    ; org $8baa6c
lda #$0000 : sta $0008,y
lda $01,s : sta $0000,y
lda $0014,y : clc : adc $0018 : sta $0018
lda $0016,y : clc : adc $001C : sta $001C
lda $0006,y : tay
lda $0006,y : tay
dec $0000 : bpl B_8BAA6C
lda $0018 : lsr : lsr : lsr : sta $14
lda $001C : lsr : lsr : lsr : sta $16
pla
rts

EMummyQueenWheelGhost:    ; org $8baaaa
cop #$DA : db $07
lda #$2000 : trb $10
lda #$00B9 : sta $12
lda $26 : sta $7F0002,x
lda $24 : sta $26
cop #$8D : db $0E
B_8BAAC4:    ; org $8baac4
cop #$DA : db $03
cop #$07 : db $26
ldy $26
lda $0010,y : bit #$2000 : beq B_8BAAC4
lda $0026,y : and #$0007
phx
tax : inc : sta $0026,y
lda $8BACB4,x
plx
and #$00FF : sta $7F0010,x
lda #$0002 : sta $7F0012,x
lda #$0000 : sta $7F0000,x
J_8BAAFA:    ; org $8baafa
cop #$8B
lda $2A : beq J_8BAAFA
lda $08 : sta $24
stz $08
B_8BAB06:    ; org $8bab06
jsr S_8BABAC
cop #$C2
lda $7F0012,x : cmp #$0080 : bcs B_8BAB25 : clc : adc #$0003 : adc $0B02 : sta $7F0012,x
dec $24 : bpl B_8BAB06
bra J_8BAAFA
B_8BAB25:    ; org $8bab25
lda $7F0002,x : bne B_8BAB60
J_8BAB2B:    ; org $8bab2b
cop #$8B
lda $2A : beq J_8BAB2B
lda $08
stz $08 : sta $24
jsr S_8BABAC
cop #$C2
J_8BAB3C:    ; org $8bab3c
lda $7F0010,x : clc : adc #$0002 : clc : adc $0B02 : sta $7F0010,x
lda $0036 : lsr : bcc B_8BAB59
lda #$2000 : tsb $10 : bra J_8BAB2B
B_8BAB59:    ; org $8bab59
lda #$2000 : trb $10 : bra J_8BAB2B
B_8BAB60:    ; org $8bab60
lda #$0200 : trb $10
cop #$57 : dl P_8BAB98
lda #$0000 : sta $7F0026,x
J_8BAB71:    ; org $8bab71
cop #$8B
lda $2A : beq J_8BAB71
lda $08
stz $08 : sta $24
B_8BAB7D:    ; org $8bab7d
jsr S_8BABAC
cop #$C2
lda $7F0010,x : clc : adc #$0002 : clc : adc $0B02 : sta $7F0010,x
dec $24 : bpl B_8BAB7D
bra J_8BAB71
P_8BAB98:    ; org $8bab98
lda #$0200 : tsb $10
lda #$0040 : trb $10
ldy $26
lda #$0000 : sta $0026,y : bra J_8BAB3C
S_8BABAC:    ; org $8babac
ldy $26
jsl LR_OrbitAtY    ; $80F3C9
rts
EMummyQueenScatterGhost:    ; org $8babb3
cop #$DA : db $07
lda #$2000 : trb $10
cop #$8D : db $0E
B_8BABBE:    ; org $8babbe
cop #$DA : db $03
cop #$07 : db $26
ldy $24
lda $0010,y : bit #$2000 : beq B_8BABBE
cop #$80 : db $0E
cop #$89
ldy $24
lda $0026,y : and #$0007
phx : tax : inc : sta $0026,y
lda $8BACB4,x
plx : and #$00FF : sta $7F0010,x
lda #$000A : sta $7F0012,x
lda $14 : sta $7F100C,x
lda $16 : sta $7F100E,x
lda #$0000 : sta $7F0000,x
J_8BAC07:    ; org $8bac07
cop #$8B
lda $2A : beq J_8BAC07
lda $08 : sta $26
stz $08
lda $7F0000,x : cmp #$0006 : bcs B_8BAC2D : inc : sta $7F0000,x
B_8BAC21:    ; org $8bac21
jsl S_80F3D3
cop #$C2
dec $26 : bpl B_8BAC21 : bra J_8BAC07
B_8BAC2D:    ; org $8bac2d
cop #$80 : db $0E
cop #$89
lda $24 : sta $26
cop #$A2 : dl C_80E6A6 : dw $2000
tya : sta $7F0012,x
lda #$800E : sta $7F000A,x
lda #$0001 : sta $7F0014,x
lda $09AA : sta $0024,y
cop #$C2
J_8BAC58:    ; org $8bac58
lda $7F0012,x : tay
lda $09AA : sta $0024,y
cop #$C8 : dw B_8BBF64
lda $7F0012,x : tay
phx
ldx $26
lda $7F1016,x
plx : sta $0024,y
cop #$C8 : dw B_8BBF64
bra J_8BAC58

;org $8bac7d
cop #$A9   ; Kill Actor06
EConvergeOn26:
lda #$2000 : trb $10
ldy $26
lda $0014,y : sta $7F0018,x
lda $0016,y : clc : adc #$FFFC : sta $7F001A,x
cop #$52 : db $FF, $02, $FF
cop #$53
ldy $26
lda $0024,y : lsr : sta $0024,y
-:
cop #$80 : db $0E
cop #$89
bra -

;org $8bacaf
cop #$DA : db $07
cop #$E0

;org $8bacb4
db $00,$20,$40,$60,$80,$A0,$C0,$E0

;org $8bacbc
EMummyQueenQuake:
cop #$A2 : dl C_8BACD8 : dw $2000
stz $24
B_8BACC5:    ; org $8bacc5
cop #$37 : db $5F
cop #$39
lda $24 : beq B_8BACC5
ldy $06
lda #$ACFE : sta $0000,y
cop #$E0

C_8BACD8:    ; org $8bacd8
lda #$0000 : sta $7F100C,x : sta $7F100E,x
cop #$DA : db $0F
lda $26 : inc : cmp #$0020 : bcc B_8BACF8
cop #$9C : dl C_8BAD6B : dw $0202
lda #$0000
B_8BACF8:    ; org $8bacf8
sta $26
jsr SR_MummyScreenShake
rtl

;org $8bacfe
lda #$0000 : sta $7F100C,x
  sta $7F100E,x
cop #$CA : db $78
jsr SR_MummyScreenShake
cop #$CB
cop #$E0

;org $8bad13
SR_MummyScreenShake:
lda $06EE : bit #$0200 : bne B_8BAD49
lda #$0000 : sta $7F100C,x
  sta $7F100E,x
J_8BAD26:    ; org $8bad26
cop #$23
pha
  and #$0003 : sec : sbc #$0001 : clc : adc $06BE : sta $06BE
pla : lsr : lsr : and #$0003 : sec : sbc #$0001 : clc : adc $06C2 : sta $06C2
rts
B_8BAD49:    ; org $8bad49
lda $7F100C,x : bne B_8BAD5F
lda $06BE : sta $7F100C,x
lda $06C2 : sta $7F100E,x
bra J_8BAD26
B_8BAD5F:    ; org $8bad5f
sta $06BE
lda $7F100E,x : sta $06C2
bra J_8BAD26

C_8BAD6B:    ; org $8bad6b
cop #$8D : db $0D
lda #$0002 : tsb $12
cop #$23
pha
  and #$001F : sta $16
pla : asl : sta $14
B_8BAD7F:    ; org $8bad7f
cop #$AA : db $01
cop #$23 : lsr : bcc B_8BAD8E
lda $12 : eor #$4000 : sta $12
B_8BAD8E:    ; org $8bad8e
cop #$63 : db $02, $07, $05
cop #$C1
cop #$64
cmp #$0000 : bmi B_8BAD9D
rtl
B_8BAD9D:    ; org $8bad9d
cop #$B8
lda $10 : bit #$4000 : bne B_8BADB3
cop #$07 : db $15
lda #$0001 : clc : adc $06C2 : sta $06C2
B_8BADB3:    ; org $8badb3
lda $16 : bmi B_8BAD7F
cmp #$0200 : bcc B_8BAD7F
cop #$E0
warnpc $8badbe











org $8baf4f
db $00 : dw $0000
EAWZipFly:


org $8bb1d7
db $0a : dw $0000
EAWBush:


org $8bb275
db $1f : dw $0000
EAWCyclops:
lda #$0020 : tsb $12
lda $AD10 : and #$00FF : sta $7F0010,x
bra EAWCyclops_Idle

EAWCyclops_RestartIdle:    ; org $8bb289
lda #$00FF : sta $7F0026,x
cop #$C2
cop #$23 : and #$0003 : sta $0000
cop #$D9 : dw $0000, $B2A0
  dw EAWCyclops_PlayerWest, EAWCyclops_PlayerEast
  dw EAWCyclops_PlayerSouth, EAWCyclops_PlayerNorth

; org $8bb2a8
EAWCyclops_Idle:
lda #$00FF : sta $7F0026,x
cop #$C6 : dw EAWCyclops_Idle    ; Save ptr.
cop #$C2
cop #$27 : db $11    ; Delay if off-screen.
cop #$2C : dw EAWCyclops_PlayerCloseY, EAWCyclops_PlayerCloseX
EAWCyclops_PlayerCloseY:
cop #$2A : dw $0000, EAWCyclops_PlayerWest, EAWCyclops_PlayerWest, EAWCyclops_PlayerEast
EAWCyclops_PlayerWest:
cop #$CA : db $02
cop #$17 : dw EAWCyclops_RestartIdle
cop #$21 : db $03 : dw B_8BB2EB
cop #$81 : db $24, $02
cop #$89
cop #$17 : dw EAWCyclops_RestartIdle
cop #$21 : db $03 : dw B_8BB2F7
cop #$81 : db $2A, $02
cop #$89
cop #$CB
B_8BB2EB:    ; org $8bb2eb
cop #$17 : dw EAWCyclops_RestartIdle
cop #$81 : db $24, $02
cop #$89
bra J_8BB301
B_8BB2F7:    ; org $8bb2f7
cop #$17 : dw EAWCyclops_RestartIdle
cop #$81 : db $2A, $02
cop #$89
J_8BB301:    ; org $8bb301
cop #$80 : db $21
cop #$89
cop #$35
cmp #$0001 : beq B_8BB310
jmp J_8BB400
B_8BB310:    ; org $8bb310
cop #$DA : db $0F
cop #$C5
EAWCyclops_PlayerEast:    ; org $8bb315
cop #$CA : db $02
cop #$21 : db $03 : dw B_8BB338
cop #$18 : dw EAWCyclops_RestartIdle
cop #$81 : db $A4, $01
cop #$89
cop #$21 : db $03 : dw B_8BB344
cop #$18 : dw EAWCyclops_RestartIdle
cop #$81 : db $AA, $01
cop #$89
cop #$CB
B_8BB338:    ; org $8bb338
cop #$18 : dw EAWCyclops_RestartIdle
cop #$81 : db $A4, $01
cop #$89
bra J_8BB34E
B_8BB344:    ; org $8bb344
cop #$18 : dw EAWCyclops_RestartIdle
cop #$81 : db $AA, $01
cop #$89
J_8BB34E:    ; org $8bb34e
cop #$80 : db $A1
cop #$89
cop #$35
cmp #$0003 : beq B_8BB35D
jmp J_8BB400
B_8BB35D:    ; org $8bb35d
cop #$DA : db $0F
cop #$C5
EAWCyclops_PlayerCloseX:    ; org $8bb362
cop #$2B : dw $0000, EAWCyclops_PlayerNorth, EAWCyclops_PlayerNorth, EAWCyclops_PlayerSouth
EAWCyclops_PlayerNorth:    ; org $8bb36c
cop #$CA : db $02
cop #$21 : db $03 : dw B_8BB38F
cop #$15 : dw EAWCyclops_RestartIdle
cop #$82 : db $23, $02
cop #$89
cop #$21 : db $03 : dw B_8BB39B
cop #$15 : dw EAWCyclops_RestartIdle
cop #$82 : db $29, $02
cop #$89
cop #$CB
B_8BB38F:    ; org $8bb38f
cop #$15 : dw EAWCyclops_RestartIdle
cop #$82 : db $23, $02
cop #$89
bra J_8BB3A5
B_8BB39B:    ; org $8bb39b
cop #$15 : dw EAWCyclops_RestartIdle
cop #$82 : db $29, $02
cop #$89
J_8BB3A5:    ; org $8bb3a5
cop #$80 : db $20
cop #$89
cop #$35
cmp #$0002 : bne J_8BB400
cop #$DA : db $0F
cop #$C5
EAWCyclops_PlayerSouth:    ; org $8bb3b6
cop #$CA : db $02
cop #$21 : db $03 : dw B_8BB3D9
cop #$16 : dw EAWCyclops_RestartIdle
cop #$82 : db $22, $01
cop #$89
cop #$21 : db $03 : dw B_8BB3E5
cop #$16 : dw EAWCyclops_RestartIdle
cop #$82 : db $28, $01
cop #$89
cop #$CB
B_8BB3D9:    ; org $8bb3d9
cop #$16 : dw EAWCyclops_RestartIdle
cop #$82 : db $22, $01
cop #$89
bra J_8BB3EF
B_8BB3E5:    ; org $8bb3e5
cop #$16 : dw EAWCyclops_RestartIdle
cop #$82 : db $28, $01
cop #$89
J_8BB3EF:    ; org $8bb3ef
cop #$80 : db $1F
cop #$89
cop #$35
cmp #$0000 : bne J_8BB400
cop #$DA : db $0F
cop #$C5
J_8BB400:    ; org $8bb400
and #$0003 : sta $26
cop #$21 : db $05 : dw B_8BB40C
cop #$C5
B_8BB40C:    ; org $8bb40c
lda $26 : sta $0000
cop #$D9 : dw $0000, $B417
  dw B_8BB41F, B_8BB4E9
  dw B_8BB47A, B_8BB558
B_8BB41F:    ; org $8bb41f
cop #$80 : db $26
cop #$89
cop #$A4 : dl C_8BB74F : dw $D000, $2002
cop #$A4 : dl C_8BB6BD : dw $D200, $2202
cop #$A4 : dl C_8BB6BD : dw $DA00, $2202
cop #$A4 : dl C_8BB6BD : dw $E000, $2202
cop #$A4 : dl C_8BB68E : dw $E600, $2202
lda #$FFFF : sta $26
cop #$C2
cop #$80 : db $10
cop #$89
lda $26 : bpl B_8BB462
rtl
B_8BB462:    ; org $8bb462
cop #$A9
cop #$A9
cop #$A9
cop #$A9
cop #$A9
lda $26 : beq B_8BB473
jmp J_8BB5C4
B_8BB473:    ; org $8bb473
cop #$80 : db $20
cop #$89
cop #$C5
B_8BB47A:    ; org $8bb47a
cop #$80 : db $25
cop #$89
cop #$A1 : dl C_8BB73D : dw $2002
lda #$FFD0
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFD2
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFDA
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFE0
jsr S_8BB686
cop #$A1 : dl C_8BB68E : dw $2202
lda #$FFE6
jsr S_8BB686
lda #$FFFF : sta $26
cop #$C2
cop #$80 : db $0F
cop #$89
lda $26 : bpl B_8BB4D1
rtl
B_8BB4D1:    ; org $8bb4d1
cop #$A8
cop #$A8
cop #$A8
cop #$A8
cop #$A8
lda $26 : beq B_8BB4E2
jmp J_8BB5C4
B_8BB4E2:    ; org $8bb4e2
cop #$80 : db $1F
cop #$89
cop #$C5
B_8BB4E9:    ; org $8bb4e9
cop #$80 : db $A7
cop #$89
cop #$A1 : dl C_8BB6CC : dw $2002
lda #$FFD8
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFD2
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFDA
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFE0
jsr S_8BB686
cop #$A1 : dl C_8BB68E : dw $2202
lda #$FFE6
jsr S_8BB686
lda #$FFFF : sta $26
cop #$C2
cop #$80 : db $91
cop #$89
lda $26 : bpl B_8BB540
rtl
B_8BB540:    ; org $8bb540
cop #$A8
cop #$A8
cop #$A8
cop #$A8
cop #$A8
lda $26 : beq B_8BB551
jmp J_8BB5C4
B_8BB551:    ; org $8bb551
cop #$80 : db $A1
cop #$89
cop #$C5
B_8BB558:    ; org $8bb558
cop #$80 : db $27
cop #$89
cop #$A1 : dl C_8BB6DC : dw $2002
lda #$FFD8
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFD2
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFDA
jsr S_8BB686
cop #$A1 : dl C_8BB6BD : dw $2202
lda #$FFE0
jsr S_8BB686
cop #$A1 : dl C_8BB68E : dw $2202
lda #$FFE6
jsr S_8BB686
lda #$FFFF : sta $26
cop #$C2
cop #$80 : db $11
cop #$89
lda $26 : bpl B_8BB5AF
rtl
B_8BB5AF:    ; org $8bb5af
cop #$A8
cop #$A8
cop #$A8
cop #$A8
cop #$A8
lda $26 : bne J_8BB5C4
cop #$80 : db $21
cop #$89
cop #$C5
J_8BB5C4:    ; org $8bb5c4
lda #$AD0C : sta $7F0020,x
lda $AD0C : and #$00FF : sta $7F0026,x
lda #$0020 : trb $12
cop #$80 : db $2B
cop #$89
B_8BB5DF:    ; org $8bb5df
cop #$C6 : dw B_8BB5DF
cop #$C2
cop #$21 : db $07 : dw B_8BB600
cop #$23 : and #$0003 : sta $0000
cop #$D9 : dw $0000, $B5F8
  dw B_8BB610, B_8BB62B
  dw B_8BB650, B_8BB66B
B_8BB600:    ; org $8bb600
cop #$2C : dw B_8BB606, B_8BB646
B_8BB606:    ; org $8bb606
cop #$2A : dw $0000, B_8BB610, B_8BB610, B_8BB62B
B_8BB610:    ; org $8bb610
cop #$CA : db $03
cop #$17 : dw B_8BB5DF
cop #$81 : db $14, $04
cop #$89
cop #$17 : dw B_8BB5DF
cop #$81 : db $17, $04
cop #$89
cop #$CB
cop #$C5
B_8BB62B:    ; org $8bb62b
cop #$CA : db $03
cop #$18 : dw B_8BB5DF
cop #$81 : db $94, $03
cop #$89
cop #$18 : dw B_8BB5DF
cop #$81 : db $97, $03
cop #$89
cop #$CB
cop #$C5
B_8BB646:    ; org $8bb646
cop #$2B : dw $0000, B_8BB650, B_8BB650, B_8BB66B
B_8BB650:    ; org $8bb650
cop #$CA : db $07
cop #$15 : dw B_8BB5DF
cop #$82 : db $13, $04
cop #$89
cop #$15 : dw B_8BB5DF
cop #$82 : db $16, $04
cop #$89
cop #$CB
cop #$C5
B_8BB66B:    ; org $8bb66b
cop #$CA : db $07
cop #$16 : dw B_8BB5DF
cop #$82 : db $12, $03
cop #$89
cop #$16 : dw B_8BB5DF
cop #$82 : db $15, $03
cop #$89
cop #$CB
cop #$C5
S_8BB686:    ; org $8bb686
clc : adc $0016,y : sta $0016,y
rts
C_8BB68E:    ; org $8bb68e
ldy $24
lda $14 : sec : sbc $0014,y : sta $7F100C,x
lda $16 : sec : sbc $0016,y : sta $7F100E,x
cop #$C1
ldy $24
lda $0014,y : clc : adc $7F100C,x : sta $14
lda $0016,y : clc : adc $7F100E,x : sta $16
rtl
C_8BB6BD:    ; org $8bb6bd
lda #$2000 : trb $10
cop #$8D : db $1E
cop #$C1
jsl LR_PlaceSelfBetween04And06    ; jsl $8aa41c
rtl
C_8BB6CC:    ; org $8bb6cc
cop #$8D : db $9D
lda #$0002 : tsb $12
lda $14 : clc : adc #$0040 : bra J_8BB6E5
C_8BB6DC:    ; org $8bb6dc
cop #$8D : db $1D
lda $14 : clc : adc #$FFC0
J_8BB6E5:    ; org $8bb6e5
sta $7F0018,x
lda $24 : sta $26
phx : tax
lda $7F0010,x
plx : sta $7F0026,x
lda #$AD10 : sta $7F0020,x
lda #$FFD8 : sta $7F100E,x
lda #$0000 : sta $7F100C,x
lda $16 : clc : adc #$0018 : sta $16
lda #$2000 : trb $10
cop #$2B : dw $0020, B_8BB72D, B_8BB724, B_8BB72D
B_8BB724:    ; org $8bb724
lda $09A4 : clc : adc #$0008 : bra J_8BB72F
B_8BB72D:    ; org $8bb72d
lda $16
J_8BB72F:    ; org $8bb72f
sta $7F001A,x
lda $16 : clc : adc #$FFE8 : sta $16 : bra J_8BB79E
C_8BB73D:    ; org $8bb73d
cop #$8D : db $19
lda #$FFD8 : sta $7F100E,x
lda $16 : clc : adc #$0050 : bra J_8BB75F
C_8BB74F:    ; org $8bb74f
cop #$8D : db $1B
lda #$FFD0 : sta $7F100E,x
lda $16 : clc : adc #$FFD0
J_8BB75F:    ; org $8bb75f
sta $7F001A,x
lda $24 : sta $26
phx : tax
lda $7F0010,x
plx : sta $7F0026,x
lda #$AD10 : sta $7F0020,x
lda #$0000 : sta $7F100C,x
lda #$2000 : trb $10
cop #$2A : dw $0020, B_8BB798, B_8BB78F, B_8BB798
B_8BB78F:    ; org $8bb78f
lda $09A2 : clc : adc #$0008 : bra J_8BB79A
B_8BB798:    ; org $8bb798
lda $14
J_8BB79A:    ; org $8bb79a
sta $7F0018,x
J_8BB79E:    ; org $8bb79e
cop #$57 : dl P_8BB800
cop #$22 : db $FF, $02
dec $28
ldy $26
B_8BB7AB:    ; org $8bb7ab
lda $0014,y : clc : adc $7F100C,x : sta $7F0018,x
lda $0016,y : clc : adc $7F100E,x : sta $7F001A,x
cop #$22 : db $FF, $02
ldy $26
lda $0014,y : clc : adc $7F100C,x : sec : sbc $14 : bpl B_8BB7DA : eor #$FFFF : inc a
B_8BB7DA:    ; org $8bb7da
cmp #$0002 : bcs B_8BB7AB
lda $0016,y : clc : adc $7F100E,x : sec : sbc $16 : bpl B_8BB7F0 : eor #$FFFF : inc a
B_8BB7F0:    ; org $8bb7f0
cmp #$0002 : bcs B_8BB7AB
ldy $26
lda #$0000 : sta $0026,y
cop #$C1
rtl
P_8BB800:    ; org $8bb800
ldy $26
lda #$0001 : sta $0026,y
cop #$07 : db $06
cop #$A5 : dl C_80DF15 : dw $0000, $0302
cop #$C1
rtl


;org $8bb817
db $00 : dw $0000
EAWGolemJumpingDown:
cop #$27 : db $0F
cop #$C1
cop #$21 : db $04 : dw B_8BB939
rtl

;org $8bb825
db $00 : dw $2000
EAWGolemFalling:
cop #$21 : db $05 : dw B_8BB82E
rtl
B_8BB82E:    ; org $8bb82e
cop #$9C : dl EAWFallingGolemShadow : dw $0300
cop #$9C : dl EAWFallingGolemPieceOne : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceTwo : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceThree : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceFour : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceFive : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceSix : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceSeven : dw $0300
cop #$DA : db $0F
cop #$9C : dl EAWFallingGolemPieceEight : dw $0300
lda #$FFFF : sta $26
cop #$C1
lda $26 : bpl B_8BB88E
rtl
B_8BB88E:    ; org $8bb88e
cop #$A9
cop #$A9
cop #$A9
cop #$A9
cop #$A9
cop #$A9
cop #$A9
cop #$A9
cop #$A9
lda #$2000 : trb $10
bra J_8BB8AA
B_8BB8A7:    ; org $8bb8a7
cop #$27 : db $08
J_8BB8AA:    ; org $8bb8aa
lda $10 : bit #$4000 : bne B_8BB8A7
cop #$21 : db $04 : dw B_8BB994
cop #$2C : dw B_8BB8BC, B_8BB8F2
B_8BB8BC:    ; org $8bb8bc
cop #$2A : dw $0000, B_8BB8C6, B_8BB8C6, B_8BB8DC
B_8BB8C6:    ; org $8bb8c6
cop #$17 : dw B_8BB97C
cop #$81 : db $05, $12
cop #$89
cop #$17 : dw B_8BB97C
cop #$81 : db $2A, $12
cop #$89
bra J_8BB8AA
B_8BB8DC:    ; org $8bb8dc
cop #$18 : dw B_8BB97C
cop #$81 : db $85, $11
cop #$89
cop #$18 : dw B_8BB97C
cop #$81 : db $AA, $11
cop #$89
bra J_8BB8AA
B_8BB8F2:    ; org $8bb8f2
cop #$2B : dw $0000, B_8BB8FC, B_8BB8FC, B_8BB912
B_8BB8FC:    ; org $8bb8fc
cop #$15 : dw B_8BB97C
cop #$82 : db $04, $12
cop #$89
cop #$15 : dw B_8BB97C
cop #$82 : db $29, $12
cop #$89
bra J_8BB8AA
B_8BB912:    ; org $8bb912
cop #$16 : dw B_8BB928
cop #$82 : db $03, $11
cop #$89
cop #$16 : dw B_8BB928
cop #$82 : db $28, $11
cop #$89
bra J_8BB8AA
B_8BB928:    ; org $8bb928
cop #$2B : dw $0010, B_8BB97C, B_8BB97C, B_8BB932
B_8BB932:    ; org $8bb932
cop #$1C : db $08 : dw B_8BB939
bra B_8BB97C
B_8BB939:    ; org $8bb939
lda #$0011 : tsb $12
cop #$80 : db $2C
cop #$89
J_8BB943:    ; org $8bb943
cop #$82 : db $2D, $07
cop #$89
cop #$1A : db $00 : dw B_8BB950
bra J_8BB943
B_8BB950:    ; org $8bb950
lda #$0011 : trb $12
cop #$07 : db $15
cop #$A2 : dl J_8BB9BE : dw $2000
lda #$0010 : tsb $10
cop #$A5 : dl C_8BB9DF : dw $0000, $2000
cop #$80 : db $2E
cop #$89
lda #$0010 : trb $10
cop #$A9
cop #$B7 : db $00
B_8BB97C:    ; org $8bb97c
cop #$C2
cop #$23 : and #$0003 : sta $0000
cop #$D9 : dw $0000, $B98C : dw B_8BB8C6, B_8BB8DC : dw B_8BB912, B_8BB8FC
B_8BB994:    ; org $8bb994
cop #$C2
lda #$0010 : tsb $10
cop #$A2 : dl J_8BB9BE : dw $2000
cop #$80 : db $07
cop #$89
cop #$84 : db $08, $04
cop #$8A
cop #$80 : db $21
cop #$89
cop #$A9
lda #$0010 : trb $10
cop #$B7 : db $00
bra B_8BB97C
J_8BB9BE:    ; org $8bb9be
ldy $24
lda $000E,y : and #$F1FF : sta $000E,y
cop #$DA : db $01
ldy $24
lda $000E,y : and #$F1FF : ora #$0200 : sta $000E,y
cop #$DA : db $01
bra J_8BB9BE
C_8BB9DF:    ; org $8bb9df
cop #$CA : db $0F
cop #$9C : dl C_8BB9FC : dw $2300
cop #$A5 : dl C_80CFEF : dw $0000, $2000
clc : adc #$0020 : sta $08
cop #$CB
cop #$E0
C_8BB9FC:    ; org $8bb9fc
cop #$23 : clc : adc $068A : sta $14 : sta $7F0018,x
cop #$23 : clc : adc $068E : sta $16 : sta $7F001A,x
cop #$13 : dw B_8BBA54
cop #$9C : dl C_8BBA56 : dw $0300
cop #$DA : db $3B
lda #$2000 : trb $10
lda $068E : sec : sbc #$0020 : sta $16
cop #$52 : db $18, $04, $FF
cop #$53
cop #$07 : db $14
cop #$86 : db $18, $0B, $45
cop #$8A
cop #$A9
lda #$0100 : trb $10
cop #$80 : db $19
cop #$89
cop #$80 : db $30
cop #$89
cop #$C2
B_8BBA54:    ; org $8bba54
cop #$E0
C_8BBA56:    ; org $8bba56
cop #$88 : dl $8EE000
J_8BBA5B:    ; org $8bba5b
cop #$80 : db $31
cop #$89
bra J_8BBA5B
EAWFallingGolemShadow:    ; org $8bba62
cop #$80 : db $12
cop #$89
bra EAWFallingGolemShadow
EAWFallingGolemPieceOne:    ; org $8bba69
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $09, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $09, $10, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceTwo:    ; org $8bba80
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $0A, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $0A, $10, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceThree:    ; org $8bba97
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $0B, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $0B, $10, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceFour:    ; org $8bbaae
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $0C, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $0C, $10, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceFive:    ; org $8bbac5
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $0D, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $0D, $10, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceSix:    ; org $8bbadc
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $0E, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $0E, $10, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceSeven:    ; org $8bbaf3
jsr SR_AWFallingGolemPieceSpawnHigh
cop #$52 : db $0F, $06, $FF
cop #$53
cop #$07 : db $15
cop #$86 : db $0F, $11, $4A
cop #$8A
cop #$C1
rtl
EAWFallingGolemPieceEight:    ; org $8bbb0a
jsr SR_AWFallingGolemPieceSpawnHigh
lda $24 : sta $26
lda $7F001A,x : clc : adc #$0010 : sta $7F001A,x
cop #$52 : db $10, $08, $FF
cop #$53
lda $14 : sta $7F0018,x
lda $16 : sec : sbc #$0010 : sta $7F001A,x
cop #$52 : db $10, $04, $FF
cop #$53
ldy $26
lda #$0000 : sta $0026,y
cop #$C1
rtl
SR_AWFallingGolemPieceSpawnHigh:    ; org $8bbb46
lda $14 : sta $7F0018,x
lda $16 : sta $7F001A,x
lda $068E : sec : sbc #$0010 : sta $16
rts
warnpc $8bbb5c



org $8bbb66
db $13 : dw $0000
; One of the two types of AW wall bug.
stz $26
lda #$0011 : tsb $12
cop #$57 : dl P_8BBD48
J_8BBB75:    ; org $8bbb75
cop #$58 : dw B_8BBB96
J_8BBB79:    ; org $8bbb79
cop #$C1
cop #$21 : db $06 : dw B_8BBB88
cop #$23 : and #$000F : sta $08
rtl
B_8BBB88:    ; org $8bbb88
cop #$A4 : dl C_8BBD02 : dw $E600, $0202
cop #$DA : db $77
bra J_8BBB79
B_8BBB96:    ; org $8bbb96
cop #$80 : db $14
cop #$89
lda $26 : bne B_8BBBD1
cop #$9E : dl C_8BBC04 : dw $0000, $0000, $0302
jsr S_8BBD81
cop #$C2
cop #$9E : dl C_8BBC04 : dw $0000, $0000, $0302
jsr S_8BBD81
cop #$C2
cop #$9E : dl C_8BBC04 : dw $0000, $0000, $0302
cop #$80 : db $2B
cop #$89
bra J_8BBB75
B_8BBBD1:    ; org $8bbbd1
cop #$9E : dl C_8BBC86 : dw $0000, $0000, $0302
jsr S_8BBD81
cop #$C2
cop #$9E : dl C_8BBC86 : dw $0000, $0000, $0302
jsr S_8BBD81
cop #$C2
cop #$9E : dl C_8BBC86 : dw $0000, $0000, $0302
cop #$80 : db $2B
cop #$89
jmp J_8BBB75
C_8BBC04:    ; org $8bbc04
cop #$07 : db $28
lda #$00A0 : tsb $12
cop #$23 : lsr : bcs B_8BBC1F
cop #$14 : db $00, $03 : dw B_8BBC1F
lda $16 : clc : adc #$0030
bra J_8BBC31
B_8BBC1F:    ; org $8bbc1f
cop #$14 : db $00, $02 : dw B_8BBD00
lda $14 : sta $7F0018,x
lda $16 : clc : adc #$0020
J_8BBC31:    ; org $8bbc31
sta $7F001A,x
lda $14 : sta $7F0018,x
cop #$22 : db $2F, $02
cop #$5B : dw $0080
lda #$0302 : trb $10
cop #$2A : dw $0000, B_8BBC52, B_8BBC52, B_8BBC6C
B_8BBC52:    ; org $8bbc52
cop #$C2
cop #$17 : dw B_8BBC6C
cop #$80 : db $A0
cop #$89
cop #$81 : db $A7, $04
cop #$89
lda $10 : bit #$4000 : beq B_8BBC52
cop #$E0
B_8BBC6C:    ; org $8bbc6c
cop #$C2
cop #$18 : dw B_8BBC52
cop #$80 : db $20
cop #$89
cop #$81 : db $27, $03
cop #$89
lda $10
bit #$4000
beq B_8BBC6C
cop #$E0
C_8BBC86:    ; org $8bbc86
cop #$07 : db $28
lda #$00A0 : tsb $12
cop #$23 : lsr : bcs B_8BBCA1
cop #$14 : db $01, $02 : dw B_8BBCA1
lda $14 : clc : adc #$0010
bra J_8BBCA9
B_8BBCA1:    ; org $8bbca1
cop #$14 : db $00, $02 : dw B_8BBD00
lda $14
J_8BBCA9:    ; org $8bbca9
sta $7F0018,x
lda $16 : clc : adc #$0020 : sta $7F001A,x
cop #$22 : db $2F, $02
cop #$5B : dw $0080
lda #$0302 : trb $10
cop #$2B : dw $0000, B_8BBCCE, B_8BBCCE, B_8BBCE8
B_8BBCCE:    ; org $8bbcce
cop #$C2
cop #$15 : dw B_8BBCE8
cop #$80 : db $1F
cop #$89
cop #$82 : db $26, $04
cop #$89
lda $10 : bit #$4000 : beq B_8BBCCE
cop #$E0
B_8BBCE8:    ; org $8bbce8
cop #$C2
cop #$16 : dw B_8BBCCE
cop #$80 : db $1F
cop #$89
cop #$82 : db $26, $03
cop #$89
lda $10 : bit #$4000 : beq B_8BBCE8
B_8BBD00:    ; org $8bbd00
cop #$E0

C_8BBD02:    ; org $8bbd02
cop #$80 : db $23
cop #$89
cop #$9E : dl C_8BBD19 : dw $0000, $0002, $0202
cop #$80 : db $24
cop #$89
cop #$E0
C_8BBD19:    ; org $8bbd19
cop #$07 : db $1E
cop #$5B : dw $0010
cop #$88 : dl $8EE000
cop #$80 : db $03
cop #$89
lda $09AA : sta $24
lda #$0003 : sta $0028,x
lda #$0002 : sta $7F0014,x
sep #$20
  lda #$80 : pha
rep #$20
lda #$E4DA : pha
rtl
P_8BBD48:    ; org $8bbd48
lda $0AEC : cmp #$0001 : bne B_8BBD55
cop #$C7 : dl J_80DB8A
B_8BBD55:    ; org $8bbd55
cop #$C8 : dw B_8BC11B
cop #$9C : dl C_80DA78 : dw $0020
lda $7F0010,x : sta $0026,y
cop #$CA : db $28
cop #$80 : db $15
cop #$89
lda #$2000 : tsb $10
cop #$C2
lda #$2000 : trb $10
cop #$C2
cop #$CB
cop #$E0
S_8BBD81:    ; org $8bbd81
cop #$23 : and #$001F : clc : adc #$0008 : sta $08
rts

;org $8bbd8d
db $16 : dw $1000
EAWFlyingSkull:




org $8bbf64
B_8BBF64:
lda #$BF75 : sta $7F001E,x
cop #$23 : and #$0001 : inc : sta $7F0014,x
B_8BBF75:    ; org $8bbf75
cop #$8B
lda $2A : beq B_8BBF75
lda $08 : sta $24
stz $08
cop #$C2
dec $24 : bmi B_8BBF88
rtl
B_8BBF88:    ; org $8bbf88
cop #$CB
cop #$C5
warnpc $8bbf8c


org $8bbfd0
db $16 : dw $1000
EAWWallSkull:
; Initial dir given by Param: 0/2/4/6 = E/W/S/N; head seeks corners left



org $8bc11b
B_8BC11B:
cop #$07 : db $06
sed
  lda $0AEE : sec : sbc #$0001 : sta $0AEE
cld
lda $0AEC : dec : sta $0AEC
  sta $7F0010,x
cop #$AC : db $00, $00
lda #$0000
  sta $7F002C,x
  sta $7F002E,x
cop #$A5 : dl C_80DF15 : dw $0000, $0302
cop #$D8
lda $7F002A,x : bit #$0008 : beq B_8BC15A
cop #$0C
B_8BC15A:    ; org $8bc15a
lda $7F0024,x : beq B_8BC182
jsl S_80B4F6 : bcs B_8BC182
lda $7F0024,x
jsl S_80B4E0
cop #$A5 : dl C_80DDF2 : dw $0000, $0342
phx
  lda $7F0024,x
  tyx
  sta $7F0024,x
plx
B_8BC182:    ; org $8bc182
cop #$C5


org $8BC184
db $0a : dw $0100
EPymdWallMummy:


org $8BC1A7
db $07 : dw $0000
EPymdLooseMummy:


org $8BC39D
db $00 : dw $0000
EPymdSpearman:


org $8bc5a3
db $0f : dw $0000
EPymdHorzWalkingOrb:


org $8BC5FC
db $0f : dw $0000
EPymdVertWalkingOrb:


org $8BC65F 
db $0f : dw $0000
EPymdStationaryOrb:


org $8BC798
db $1b : dw $0000
EPymdInvisibleHead:



; org $8bc896
GotPalSnesAbortGame:
rep #$20
cop #$50 : dl $DE1D35 : db $00, $00, $08
lda #$0000 : sta $7F0A00
cop #$BD : dl Text_WarningGameIncompatible+1    ; $81D9D8, the +1 seems to be a bug
sep #$20
lda #$04 : sta $212C
rep #$20
cop #$C1
rtl
;org $8bc8b8
rep #$20    ; Inaccessible.

;org $8bc8ba
db $00,$00,$18
ELogoScreenHandler:
lda #$4000 : tsb $09EC
lda #$0000 : sta $7F0A00
sep #$20
lda #$01 : sta $420D
lda #$10 : sta $212C
rep #$20
lda #$FFF0 : tsb $065A
sep #$20
lda $213F : bit #$10 : beq .GotNtscSnes
jmp GotPalSnesAbortGame
.GotNtscSnes:    ; org $8bc8ea
rep #$20
cop #$BC : db $08, $00
cop #$D0 : db $10, $01 : dw B_8BC90F
cop #$BC : db $00, $F0
cop #$84 : db $01, $02
cop #$8A
cop #$CC : db $10
cop #$26 : db $FB, $00, $00, $00, $00, $00, $00, $11
cop #$E0

#B_8BC90F:    ; org $8bc90f
cop #$84 : db $00, $02
cop #$8A
cop #$CE : db $10
cop #$26 : db $FC, $00, $00, $00, $00, $00, $00, $11
cop #$E0

;org $8bc924
db $00,$00,$30
ETitleScreenManager:
lda #$4001 : tsb $09EC
cop #$50 : dl $C17FBE : db $00, $00, $20
cop #$50 : dl $DE1D35 : db $00, $00, $08
lda #$0000 : sta $7F0A00
cop #$A0 : dl ETitleScreenEarth : dw $0080, $0050, $1800
sep #$20
  lda #$10 : sta $212C
rep #$20
lda #$0804 : sta $064A
cop #$DA : db $B3
cop #$BD : dl $81DA5E
cop #$DA : db $77
cop #$BD : dl $81DA47
cop #$DB : dw $09D3
cop #$CC : db $F4
lda #$0804 : sta $064A
cop #$26 : db $8C, $00, $00, $00, $00, $00, $00, $11
cop #$C1
rtl

ETitleScreenEarth:    ; org $8bc988
cop #$B6 : db $10
cop #$84 : db $00, $F0
cop #$8A
cop #$85 : db $00, $40, $02
cop #$8A
cop #$DA : db $3B
sep #$20
  lda #$16 : sta $212C
rep #$20
cop #$C1
rtl

;org $8bc9a7
cop #$37 : db $2d
cop #$39
cop #$E0

;org $8bc9ae
db $00,$00,$38
ETitleScreenStartButtonListener:
lda #$FFF0 : tsb $065A
cop #$DB : dw $021B
bra +
;org $8bc9bd
db $00,$00,$38
EAttractMapsStartButtonListener:
lda #$FFF0 : tsb $065A
+:
cop #$C1
cop #$40 : dw $1001, .PressedStart
rtl
.PressedStart:    ; org $8bc9cf
stz $0DB6
lda #$0000 : sta $064A
lda #$0001 : sta $0648
cop #$26 : db $FA, $00, $01, $70, $03, $00, $00, $44
cop #$C2
phd
phx
lda #$0000 : tcd
jsl LR_WaitForNmi    ; $828043
plx
pld
cop #$C1
sep #$20
  lda #$00 : sta $2100
rep #$20
rtl
;org $8bca02


org $8bcb4e
db $00 : dw $3800
EAttractMapTwoDriver:
sep #$20
  stz $211A   ; Reset mode 7 special settings.
rep #$20
cop #$50 : dl $DE1935 : db $00, $00, $20
cop #$D1 : dw $017C : db $01 : dw .PhaseTwo
.PhaseOne:
cop #$CD : dw $017C
cop #$9A : dl C_8BCC2B : dw $2800
cop #$A0 : dl EAttractMapTextWriter : dw $0020, $0050, $2000
lda #$D0B2 : sta $0026,y
cop #$3C : dl $8BD031
cop #$E0
.PhaseTwo:    ; org $8bcb8a
cop #$D1 : dw $017D : db $01 : dw .PhaseThree
cop #$CD : dw $017D
cop #$9A : dl C_8BCC5B : dw $2800
cop #$A0 : dl EAttractMapTextWriter : dw $0064, $0058, $2000
lda #$D0E3 : sta $0026,y
cop #$3C : dl $8BD031
cop #$E0
.PhaseThree:    ; org $8bcbb4
cop #$D1 : dw $017E : db $01 : dw .PhaseFour
cop #$CD : dw $017E
cop #$9A : dl C_8BCC85 : dw $2800
cop #$A0 : dl EAttractMapTextWriter : dw $0038, $007C, $2000
lda #$D11C : sta $0026,y
cop #$3C : dl $8BD031
cop #$E0
.PhaseFour:    ; org $8bcbde
cop #$D1 : dw $017F : db $01 : dw .PhaseFive
cop #$CD : dw $017F
cop #$9A : dl C_8BCCAE : dw $2800
cop #$A0 : dl EAttractMapTextWriter : dw $0040, $0020, $2000
lda #$D144 : sta $0026,y
cop #$3C : dl $8BD031
cop #$E0
.PhaseFive:    ; org $8bcc08
cop #$9A : dl C_8BCCD7 : dw $2800
cop #$CF : dw $017C
cop #$A0 : dl EAttractMapTextWriter : dw $0038, $0050, $2000
lda #$D189 : sta $0026,y
cop #$3C : dl $8BD031
cop #$E0
C_8BCC2B:    ; org $8bcc2b
jsr S_8BCD26
cop #$C1
lda $0036 : and #$0003 : bne B_8BCC3E
dec $00CA
dec $06BE
B_8BCC3E:    ; org $8bcc3e
dec $00C2
dec $00C8
lda $00C2 : cmp #$00E0 : beq B_8BCC55
  cmp #$008B : bcc B_8BCC52
rtl
B_8BCC52:    ; org $8bcc52
jmp J_8BCCF5
B_8BCC55:    ; org $8bcc55
cop #$3C : dl $8BD039
rtl
C_8BCC5B:    ; org $8bcc5b
jsr S_8BCD26
cop #$C1
lda $0036 : and #$0003 : bne B_8BCC6E
inc $00CA
inc $06BE
B_8BCC6E:    ; org $8bcc6e
dec $00C2
dec $00C8
lda $00C2 : cmp #$00E0 : beq B_8BCC55
  cmp #$008B : bcc B_8BCC82
rtl
B_8BCC82:    ; org $8bcc82
jmp J_8BCCF5
C_8BCC85:    ; org $8bcc85
jsr S_8BCD26
cop #$C1
lda $0036 : and #$0003 : bne B_8BCC98
  inc $00CC : inc $06C2
B_8BCC98:    ; org $8bcc98
dec $00C2
dec $00C8
lda $00C2 : cmp #$00E0 : beq B_8BCC55
  cmp #$008B : bcc B_8BCCAC
rtl
B_8BCCAC:    ; org $8bccac
bra J_8BCCF5
C_8BCCAE:    ; org $8bccae
jsr S_8BCD26
cop #$C1
lda $0036 : and #$0003 : bne B_8BCCC1
dec $00CC
dec $06C2
B_8BCCC1:    ; org $8bccc1
dec $00C2
dec $00C8
lda $00C2 : cmp #$00E0 : beq B_8BCC55
  cmp #$008B : bcc B_8BCCD5
rtl
B_8BCCD5:    ; org $8bccd5
bra J_8BCCF5
C_8BCCD7:    ; org $8bccd7
jsr S_8BCD26
cop #$C1
dec $00C2
dec $00C8
lda $00C2 : cmp #$0050 : bne B_8BCCED
jmp B_8BCC55
B_8BCCED:    ; org $8bcced
cmp #$0000 : beq B_8BCCF3
rtl
B_8BCCF3:    ; org $8bccf3
bra J_8BCCF5
J_8BCCF5:    ; org $8bccf5
cop #$D1 : dw $017C : db $00 : dw B_8BCD14
lda #$0200 : sta $064A
lda #$0001 : sta $0648
cop #$26 : db $8D, $00, $00, $00, $00, $00, $00, $11
cop #$E0
B_8BCD14:    ; org $8bcd14
lda #$0804 : sta $064A
cop #$26 : db $8E, $00, $00, $00, $00, $00, $00, $11
cop #$E0
S_8BCD26:    ; org $8bcd26
lda #$0200 : sta $00C2
lda #$0200 : sta $00C8
lda #$0200 : sta $00CA
lda #$0200 : sta $00CC
lda #$0180 : sta $06BE
lda #$0180 : sta $06C2
rts
warnpc $8bcd4b


org $8bcf52
#C_8BCF52:
phb
phx
sep #$20
ldy $24
lda $0002,y : pha : plb
ldx #$0000
ldy $26
#J_8BCF62:
lda $0000,y : cmp #$CA : beq B_8BCF6D
  inx
  iny
  bra J_8BCF62
#B_8BCF6D:
rep #$20
txa
  and #$FFFE
  sec : sbc #$0020
  eor #$FFFF : inc a
  and #$FFFE : asl : asl
plx
  sta $14
lda #$0038 : sta $16
lda #$2300 : sta $0E : bra J_8BCFB3

;org $8bcf8f
EAttractMapTextWriter:
phb
lda #$0000 : sta $7F0BE0
  sta $7F0BE2
  sta $7F0BE4
  sta $7F0BE6
lda #$2F00 : sta $0E
sep #$20
  ldy $24
  lda $0002,y
  pha : plb
rep #$20
J_8BCFB3:
ldy $26
stz $00DA
lda $14 : sta $18
  sta $26
lda $16 : sta $1A
sep #$20
  sta $27
rep #$20
phx
ldx #$0000
sep #$20
J_8BCFCE:    ; org $8bcfce
lda $0000,y
  iny
  cmp #$C0 : bcs J_8BD00B
  cmp #$57 : beq B_8BCFFD
rep #$20
  and #$00FF : asl : ora $0E : sta $7F0602,x
lda $26 : sta $7F0600,x
  clc : adc #$0008 : sta $26
inc $00DA
inx : inx : inx : inx
sep #$20
bra J_8BCFCE
B_8BCFFD:    ; org $8bcffd
rep #$20
lda $26 : clc : adc #$0008 : sta $26
sep #$20
bra J_8BCFCE
J_8BD00B:    ; org $8bd00b
cmp #$CA : beq B_8BD025
cmp #$CB : beq B_8BD016
nop : bra J_8BD00B
B_8BD016:    ; org $8bd016
lda $18 : sta $26
lda $1A : clc : adc #$10 : sta $27
sta $1A
bra J_8BCFCE
B_8BD025:    ; org $8bd025
plx
rep #$20
plb
asl $00DA
asl $00DA
cop #$E0
C_8BD031:    ; org $8bd031
cop #$37 : db $75
cop #$39
cop #$3D
rtl
C_8BD039:    ; org $8bd039
cop #$37 : db $76
cop #$39
cop #$CC : db $0F
cop #$3D
rtl

; Mode 7 cutscene text. Letters are drawn as sprites on the screen (OAM),
;   and the encoding is unique:
;   $00 - $07 = ABCDEFGH
;   $10 - $17 = IJKLMNO!
;   $20 - $27 = PQRSTUVW
;   $30 - $37 = XYZ/?-()
;   $40 - $47 = abcdefgh
;   $50 - $57 = ijklmno   the last character being a space
;   $60 - $67 = pqrstuvw
;   $70 - $77 = xyz,.'""  the latter being left and right double-quotes
;   $ca = end text, $cb = newline
; (Like other text, the encoded bytes are VRAM offsets. Each 8x16 letter
;   has an 8x16 transparent space next to it, so when rendered as
;   overlapping 16x16 sprites they look like normal text. That means
;   each VRAM row only fits 8 letters, which the devs chose to address
;   here as $00-7 instead of $00,2,4,6,8,A,C,E.)
; org $8bd044
db $24,$47,$44,$57,$67,$56,$62,$53,$43,$57,$67,$40,$63,$57,$50,$55,$cb
db $40,$55,$57,$40,$46,$44,$57,$56,$45,$57,$cb
db $44,$70,$60,$53,$56,$62,$40,$64,$50,$56,$55,$74,$ca

; org $8bd06d
db $13,$56,$56,$52,$50,$55,$46,$57,$45,$56,$62,$57,$55,$44,$67,$cb
db $53,$40,$55,$43,$63,$73,$cb
db $54,$40,$55,$57,$65,$55,$42,$56,$66,$44,$62,$44,$43,$57,$64,$47,$44,$cb
db $62,$44,$53,$50,$42,$63,$57,$56,$45,$57,$40,$55,$42,$50,$44,$55,$64,$cb
db $42,$65,$53,$64,$65,$62,$44,$63,$74,$ca

; org $8bd0b2
db $00,$63,$57,$64,$50,$54,$44,$57,$60,$40,$63,$63,$44,$43,$73,$cb
db $54,$40,$55,$71,$57,$53,$44,$46,$44,$55,$43,$63,$57,$cb
db $41,$44,$46,$40,$55,$57,$64,$56,$57,$63,$65,$62,$45,$40,$42,$44,$74,$57,$ca

; org $8bD0E3
db $00,$57,$53,$44,$46,$44,$55,$43,$57,$45,$62,$56,$54,$57,$44,$40,$42,$47,$cb
db $62,$65,$50,$55,$73,$cb
db $40,$57,$53,$44,$46,$44,$55,$43,$57,$45,$62,$56,$54,$57,$44,$40,$42,$47,$cb
db $42,$65,$53,$64,$65,$62,$44,$74,$74,$74,$74,$57,$ca

; org $8bD11C
db $26,$40,$62,$50,$56,$65,$63,$57,$62,$44,$53,$50,$42,$63,$cb
db $67,$44,$62,$44,$57,$45,$56,$65,$55,$43,$57,$50,$55,$57,$64,$47,$44,$cb
db $62,$65,$50,$55,$63,$74,$ca

; org $8bD144
db $16,$55,$44,$57,$56,$45,$57,$64,$47,$44,$cb
db $53,$44,$46,$44,$55,$43,$63,$57,$64,$56,$53,$43,$57,$56,$45,$cb
db $63,$64,$62,$40,$55,$46,$44,$57,$63,$64,$40,$64,$65,$44,$63,$cb
db $50,$55,$57,$64,$47,$44,$57,$63,$47,$40,$60,$44,$63,$57,$56,$45,$cb
db $63,$60,$50,$62,$50,$64,$63,$74,$ca

; org $8bD189
db $27,$47,$40,$64,$57,$67,$40,$63,$57,$40,$57,$63,$60,$50,$62,$50,$64,$57,$64,$56,$cb
db $40,$55,$42,$50,$44,$55,$64,$57,$60,$44,$56,$60,$53,$44,$74,$74,$74,$cb
db $24,$47,$44,$57,$62,$65,$50,$55,$63,$57,$cb
db $43,$56,$55,$75,$64,$57,$64,$44,$53,$53,$57,$65,$63,$74,$ca

; org $8bd1ca
db $20,$44,$56,$60,$53,$44,$57,$67,$47,$56,$57,$44,$55,$64,$44,$62,$44,$43,$cb
db $64,$47,$44,$57,$62,$65,$50,$55,$63,$73,$cb
db $63,$44,$40,$62,$42,$47,$50,$55,$46,$57,$45,$56,$62,$cb
db $67,$44,$40,$53,$64,$47,$73,$57,$67,$44,$55,$64,$57,$50,$55,$73,$cb
db $40,$55,$43,$57,$67,$44,$62,$44,$57,$55,$44,$66,$44,$62,$57,$63,$44,$44,$55,$cb
db $40,$46,$40,$50,$55,$74,$ca

; org $8bd222
db $23,$56,$54,$44,$57,$63,$40,$50,$43,$57,$64,$47,$44,$62,$44,$cb
db $67,$44,$62,$44,$57,$64,$62,$40,$60,$63,$57,$64,$56,$cb
db $60,$62,$56,$64,$44,$42,$64,$57,$64,$47,$44,$cb
db $64,$62,$44,$40,$63,$65,$62,$44,$73,$57,$56,$64,$47,$44,$62,$63,$cb
db $63,$40,$50,$43,$57,$50,$64,$57,$67,$40,$63,$57,$40,$cb
db $42,$65,$62,$63,$44,$74,$ca

; org $8bd272
db $15,$56,$57,$56,$55,$44,$57,$64,$47,$56,$65,$46,$47,$64,$cb
db $64,$47,$44,$63,$44,$57,$62,$65,$50,$55,$63,$57,$67,$56,$65,$53,$43,$cb
db $41,$62,$50,$55,$46,$57,$40,$41,$56,$65,$64,$cb
db $43,$50,$63,$40,$63,$64,$44,$62,$74,$74,$74,$ca

warnpc $8bd2ab




; Post-Comet victory text.
org $8BD558
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$C2,$13,$D2,$00,$D5,$06,$D6,$25,$CB,$D6,$64,$D6,$9D,$A4,$8E,$AC,$CB,$A4,$87,$84,$AC,$82,$8E,$8C,$84,$A4,$2A,$2A,$2A,$0D,$AC,$C9,$78,$CE,$64,$87,$80,$A4,$AC,$86,$8B,$8E,$A7,$88,$8D,$86,$CB,$86,$A2,$84,$84,$8D,$AC,$A0,$8B,$80,$8D,$84,$A4,$0D,$C9,$B4,$C8,$CA
;org $8BD5A0
db $C1,$03,$04,$C7,$0D,$03,$C2,$15,$D2,$00,$D5,$06,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$CB,$64,$87,$84,$AC,$D7,$55,$D6,$C2,$CB,$87,$80,$A3,$AC,$83,$88,$A3,$80,$A0,$A0,$84,$80,$A2,$84,$83,$2A,$AC,$C9,$78,$CE,$64,$87,$84,$AC,$84,$A6,$88,$8B,$AC,$A3,$A4,$80,$A2,$AC,$87,$80,$A3,$AC,$85,$8B,$8E,$A7,$8D,$CB,$8E,$85,$85,$AC,$A4,$8E,$AC,$A4,$87,$84,$AC,$D6,$BD,$A3,$88,$83,$84,$CB,$8E,$85,$AC,$A4,$87,$84,$AC,$A5,$8D,$88,$A6,$84,$A2,$A3,$84,$2A,$2A,$2A,$C9,$B4,$CE,$C2,$15,$D2,$00,$D5,$06,$67,$88,$8B,$8B,$2A,$AC,$CB,$C9,$28,$43,$8E,$AC,$A9,$8E,$A5,$AC,$D6,$A4,$A7,$87,$80,$A4,$CB,$A0,$8B,$80,$8D,$84,$A4,$AC,$D6,$D7,$88,$A3,$2B,$AC,$86,$8B,$8E,$A7,$88,$8D,$86,$CB,$D6,$D9,$88,$8D,$AC,$A4,$87,$84,$AC,$83,$80,$A2,$8A,$8D,$84,$A3,$A3,$0D,$C9,$B4,$CE,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$AC,$CB,$4E,$A5,$A2,$AC,$44,$80,$A2,$A4,$87,$2A,$2A,$2A,$0D,$C9,$78,$CE,$C2,$15,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$CB,$64,$87,$80,$A4,$0E,$A3,$AC,$D7,$99,$4E,$A5,$A2,$AC,$44,$80,$A2,$A4,$87,$2A,$CB,$C9,$78,$CE,$43,$8E,$84,$A3,$8D,$0E,$A4,$AC,$88,$A4,$AC,$D6,$A9,$D6,$A5,$80,$CB,$83,$84,$A3,$84,$A2,$A4,$AC,$8E,$80,$A3,$88,$A3,$0D,$C9,$B4,$CE,$C2,$13,$D2,$00,$D6,$25,$CB,$D6,$1D,$D6,$BB,$D7,$A0,$CB,$A3,$8E,$AC,$81,$84,$80,$A5,$A4,$88,$85,$A5,$8B,$2A,$C9,$B4,$CE,$41,$A5,$A4,$AC,$88,$A4,$AC,$D6,$AA,$8B,$8E,$8D,$84,$8B,$A9,$CB,$A3,$87,$88,$8D,$88,$8D,$86,$AC,$88,$8D,$AC,$A4,$87,$84,$AC,$83,$80,$A2,$8A,$2A,$2A,$2A,$C9,$B4,$C8,$CA
;org $8BD70E
db $C1,$03,$04,$C7,$0D,$02,$D2,$00,$D5,$06,$C2,$14,$D2,$00,$D6,$46,$66,$8E,$88,$82,$84,$2F,$AC,$69,$84,$A3,$2A,$CB,$64,$87,$84,$AC,$D6,$F5,$88,$A3,$AC,$80,$A7,$80,$8A,$84,$8D,$84,$83,$2A,$C9,$B4,$C8,$CA
;org $8BD740
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$D5,$06,$CE,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$AC,$CB,$4C,$8E,$A4,$87,$84,$A2,$0D,$4F,$C9,$B4,$CE,$C2,$14,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$8C,$8E,$A4,$87,$84,$A2,$2F,$CB,$64,$87,$84,$AC,$44,$80,$A2,$A4,$87,$2A,$CB,$C9,$3C,$40,$AC,$D7,$85,$D6,$F0,$8C,$88,$8B,$8B,$88,$8E,$8D,$A3,$AC,$CB,$8E,$85,$AC,$82,$87,$88,$8B,$83,$A2,$84,$8D,$2A,$C9,$B4,$CE,$48,$0E,$8C,$AC,$D7,$A6,$A9,$8E,$A5,$AC,$D6,$DA,$CB,$D6,$6B,$A5,$A3,$AC,$A3,$8E,$8C,$84,$A4,$88,$8C,$84,$A3,$2B,$AC,$CB,$80,$8D,$83,$AC,$D6,$26,$8E,$85,$A4,$84,$8D,$AC,$CB,$A4,$87,$88,$8D,$8A,$A3,$AC,$D6,$6B,$87,$84,$A2,$AC,$A0,$80,$A2,$84,$8D,$A4,$A3,$2A,$C9,$B4,$CE,$64,$87,$84,$AC,$D6,$14,$88,$A3,$AC,$A4,$87,$84,$AC,$A3,$80,$8C,$84,$CB,$A7,$80,$A9,$2A,$AC,$63,$87,$84,$AC,$D7,$6D,$8B,$8E,$8D,$84,$8B,$A9,$AC,$88,$85,$CB,$87,$84,$A2,$AC,$D6,$7D,$85,$8E,$A2,$86,$84,$A4,$CB,$D6,$6B,$87,$84,$A2,$2A,$C9,$B4,$CE,$C2,$15,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$47,$8E,$A7,$AC,$88,$A3,$AC,$88,$A4,$2B,$CB,$A9,$8E,$A5,$AC,$A4,$A7,$8E,$0D,$AC,$CB,$C9,$3C,$D7,$1A,$80,$A4,$AC,$A4,$87,$84,$AC,$A7,$8E,$A2,$8B,$83,$CB,$A9,$8E,$A5,$AC,$D6,$AF,$88,$8D,$AC,$85,$A2,$8E,$8C,$CB,$A4,$87,$84,$AC,$8E,$A5,$A4,$A3,$88,$83,$84,$0D,$C9,$B4,$CE,$C2,$13,$D2,$00,$D6,$25,$CB,$D6,$1D,$80,$A3,$AC,$88,$85,$AC,$A7,$84,$0E,$83,$AC,$CB,$D6,$71,$A3,$A0,$88,$A2,$88,$A4,$A3,$2A,$2A,$2A,$C9,$B4,$CE,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$AC,$48,$AC,$D6,$F1,$A4,$8E,$AC,$A3,$87,$8E,$A7,$AC,$CB,$80,$8B,$8B,$AC,$8E,$85,$AC,$8E,$A5,$A2,$AC,$86,$A2,$8E,$A5,$A0,$2A,$2A,$2A,$C9,$78,$CE,$4D,$8E,$2B,$AC,$48,$AC,$D6,$F1,$A4,$8E,$AC,$A3,$87,$8E,$A7,$CB,$D6,$89,$88,$8D,$AC,$A4,$87,$84,$AC,$A7,$8E,$A2,$8B,$83,$2A,$2A,$2A,$C9,$B4,$CE,$C2,$15,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$63,$8E,$8C,$84,$83,$80,$A9,$AC,$CB,$D6,$C1,$D6,$EF,$81,$A5,$88,$8B,$83,$AC,$A3,$87,$88,$A0,$A3,$AC,$CB,$A4,$8E,$AC,$A4,$A2,$80,$A6,$84,$8B,$AC,$A4,$87,$84,$AC,$A5,$8D,$88,$A6,$84,$A2,$A3,$84,$2A,$C9,$B4,$CE,$64,$87,$84,$8D,$AC,$D7,$AB,$D6,$EF,$A3,$84,$84,$CB,$D6,$D6,$86,$A2,$84,$84,$8D,$AC,$D6,$14,$A7,$88,$A4,$87,$CB,$D6,$E1,$8E,$A7,$8D,$AC,$84,$A9,$84,$A3,$2A,$C9,$B4,$CE,$63,$84,$84,$AC,$87,$8E,$A7,$AC,$8B,$8E,$8D,$84,$8B,$A9,$AC,$A4,$87,$84,$CB,$D6,$14,$8B,$8E,$8E,$8A,$A3,$2B,$AC,$D6,$A3,$8B,$88,$8A,$84,$CB,$A4,$87,$84,$AC,$A4,$A7,$8E,$AC,$8E,$85,$AC,$A9,$8E,$A5,$2A,$C9,$B4,$CE,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$4B,$8E,$8E,$8A,$AC,$CB,$82,$80,$A2,$84,$85,$A5,$8B,$8B,$A9,$AC,$80,$A4,$AC,$D6,$FE,$CB,$8C,$80,$A0,$AC,$8E,$85,$AC,$A4,$87,$84,$AC,$A7,$8E,$A2,$8B,$83,$2A,$C9,$B4,$CE,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$CB,$40,$87,$4F,$AC,$64,$87,$84,$AC,$8C,$80,$A0,$AC,$87,$80,$A3,$AC,$A3,$A4,$80,$A2,$A4,$84,$83,$CB,$A4,$8E,$AC,$82,$87,$80,$8D,$86,$84,$4F,$C9,$B4,$C8,$CA
;org $8BD9FA
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$D5,$06,$CE,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$AC,$CB,$67,$87,$A9,$AC,$83,$8E,$AC,$A9,$8E,$A5,$AC,$A4,$A7,$8E,$AC,$CB,$D6,$A4,$A4,$87,$84,$AC,$85,$A5,$A4,$A5,$A2,$84,$0D,$C9,$B4,$CE,$C2,$15,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$CB,$D6,$61,$48,$AC,$D7,$7A,$8C,$A9,$AC,$81,$8E,$83,$A9,$2B,$AC,$48,$AC,$CB,$D6,$CB,$A3,$84,$84,$88,$8D,$86,$AC,$84,$A6,$84,$A2,$A9,$A4,$87,$88,$8D,$86,$2A,$C9,$B4,$CE,$64,$87,$84,$AC,$A0,$80,$A3,$A4,$2A,$AC,$64,$87,$84,$AC,$85,$A5,$A4,$A5,$A2,$84,$2A,$AC,$CB,$47,$A5,$8C,$80,$8D,$88,$A4,$A9,$0E,$A3,$AC,$A0,$A2,$8E,$86,$A2,$84,$A3,$A3,$2A,$C9,$B4,$CE,$D6,$30,$D6,$C1,$A7,$8E,$A5,$8B,$83,$CB,$82,$80,$8B,$8B,$AC,$D6,$D6,$8A,$88,$8D,$83,$AC,$8E,$85,$AC,$81,$8E,$83,$A9,$CB,$80,$AC,$A3,$A0,$88,$A2,$88,$A4,$2A,$C9,$B4,$CE,$C2,$14,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$8C,$8E,$A4,$87,$84,$A2,$2F,$CB,$4D,$8E,$A7,$AC,$A9,$8E,$A5,$AC,$80,$8D,$83,$AC,$D6,$26,$82,$80,$8D,$AC,$CB,$D6,$71,$8E,$A2,$83,$88,$8D,$80,$A2,$A9,$AC,$CB,$D6,$7D,$80,$86,$80,$88,$8D,$2A,$C9,$B4,$CE,$D6,$0D,$81,$84,$AC,$80,$85,$A2,$80,$88,$83,$2A,$C9,$B4,$CE,$C2,$13,$D2,$00,$D6,$25,$D6,$61,$A7,$84,$AC,$CB,$A2,$84,$A4,$A5,$A2,$8D,$AC,$A4,$8E,$AC,$44,$80,$A2,$A4,$87,$2B,$AC,$D6,$EF,$CB,$A7,$84,$AC,$81,$84,$AC,$A3,$84,$A0,$80,$A2,$80,$A4,$84,$83,$0D,$C9,$B4,$CE,$C2,$15,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$69,$84,$A3,$2A,$2A,$2A,$AC,$CB,$C9,$28,$64,$87,$84,$AC,$D6,$F5,$88,$A3,$AC,$82,$87,$80,$8D,$86,$88,$8D,$86,$2A,$AC,$CB,$47,$A5,$8C,$80,$8D,$88,$A4,$A9,$AC,$80,$8D,$83,$AC,$87,$88,$A3,$A4,$8E,$A2,$A9,$2B,$AC,$CB,$D6,$98,$D6,$CB,$83,$8E,$A7,$8D,$AC,$80,$AC,$CB,$8D,$84,$A7,$AC,$A0,$80,$A4,$87,$2A,$C9,$B4,$CE,$69,$8E,$A5,$AC,$A4,$A7,$8E,$AC,$D6,$D8,$CB,$D6,$B9,$8E,$85,$AC,$88,$A4,$AC,$D6,$F6,$A9,$8E,$A5,$AC,$CB,$8C,$84,$A4,$AC,$84,$80,$82,$87,$AC,$D6,$BD,$88,$8D,$AC,$CB,$D6,$47,$42,$80,$A0,$84,$2A,$AC,$C9,$B4,$CE,$41,$A5,$A4,$AC,$D6,$F6,$A4,$87,$84,$AC,$44,$80,$A2,$A4,$87,$CB,$8D,$84,$84,$83,$84,$83,$AC,$A4,$87,$84,$AC,$4B,$88,$86,$87,$A4,$AC,$80,$8D,$83,$CB,$D6,$0C,$4A,$8D,$88,$86,$87,$A4,$A3,$2B,$AC,$A9,$8E,$A5,$CB,$8C,$84,$A4,$AC,$80,$86,$80,$88,$8D,$AC,$A5,$8D,$84,$A8,$A0,$84,$82,$A4,$84,$83,$8B,$A9,$2A,$C9,$B4,$CE,$D6,$2B,$D6,$A9,$80,$A4,$AC,$A4,$87,$84,$AC,$A7,$8E,$A2,$8B,$83,$CB,$D6,$74,$A4,$87,$84,$AC,$D6,$C2,$8E,$85,$AC,$A4,$87,$84,$CB,$D6,$7B,$88,$A3,$AC,$84,$A8,$A4,$88,$8D,$86,$A5,$88,$A3,$87,$84,$83,$2A,$C9,$B4,$CE,$C2,$14,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$8C,$8E,$A4,$87,$84,$A2,$2F,$AC,$CB,$67,$84,$AC,$D7,$71,$A9,$8E,$A5,$AC,$A4,$A7,$8E,$AC,$CB,$D6,$98,$80,$AC,$81,$A2,$88,$86,$87,$A4,$AC,$85,$A5,$A4,$A5,$A2,$84,$2A,$2A,$2A,$C9,$B4,$C8,$CA
;org $8BDC95
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$D5,$06,$C2,$13,$D2,$00,$D6,$25,$67,$88,$8B,$8B,$2A,$2A,$2A,$AC,$CB,$C9,$28,$D6,$09,$87,$84,$A2,$84,$2A,$2A,$2A,$2A,$CB,$C9,$50,$D7,$37,$8C,$84,$AC,$D6,$FE,$85,$80,$82,$84,$2A,$2A,$2A,$C9,$B4,$CE,$48,$AC,$D6,$F1,$A4,$8E,$AC,$81,$A5,$A2,$8D,$AC,$A9,$8E,$A5,$CB,$D6,$A1,$8C,$A9,$AC,$8C,$84,$8C,$8E,$A2,$A9,$2A,$C9,$B4,$CE,$D6,$68,$D7,$60,$C9,$1E,$D6,$68,$8D,$8E,$A3,$84,$AC,$CB,$C9,$1E,$D6,$68,$8C,$8E,$A5,$A4,$87,$AC,$C9,$28,$D6,$68,$87,$80,$88,$A2,$AC,$CB,$C9,$1E,$D6,$68,$D6,$EE,$CB,$C9,$28,$64,$87,$84,$AC,$A7,$80,$A2,$8C,$A4,$87,$AC,$8E,$85,$CB,$D6,$FE,$87,$80,$8D,$83,$2A,$2A,$2A,$2A,$C9,$B4,$C8,$CA
;org $8BDD34
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$D5,$06,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$AC,$D6,$0D,$A7,$8E,$A2,$A2,$A9,$2A,$AC,$CB,$C9,$3C,$48,$AC,$D6,$EF,$A3,$84,$80,$A2,$82,$87,$AC,$A9,$8E,$A5,$AC,$8E,$A5,$A4,$2A,$C9,$B4,$CE,$4D,$8E,$AC,$D6,$B8,$87,$8E,$A7,$AC,$8B,$8E,$8D,$86,$CB,$88,$A4,$AC,$A4,$80,$8A,$84,$A3,$2A,$CB,$C9,$3C,$47,$A5,$8D,$83,$A2,$84,$83,$A3,$AC,$8E,$85,$AC,$A9,$84,$80,$A2,$A3,$2A,$2A,$2A,$CB,$C9,$1E,$64,$87,$8E,$A5,$A3,$80,$8D,$83,$A3,$AC,$8E,$85,$AC,$A9,$84,$80,$A2,$A3,$2A,$2A,$2A,$CB,$C9,$1E,$48,$AC,$D6,$EF,$D6,$79,$A4,$8E,$AC,$A9,$8E,$A5,$2A,$C9,$B4,$CE,$63,$8E,$AC,$D6,$E7,$82,$80,$A2,$84,$2A,$2A,$2A,$CB,$C9,$5A,$42,$8B,$8E,$A3,$84,$AC,$D6,$FE,$84,$A9,$84,$A3,$2A,$2A,$2A,$C9,$78,$C8,$CA
;org $8BDDE5
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$D5,$06,$C2,$13,$D2,$00,$D6,$25,$CB,$67,$88,$8B,$8B,$2A,$2A,$2A,$2A,$C9,$78,$C8,$CA
;org $8BDE02
db $C1,$03,$04,$C7,$0D,$03,$D2,$00,$D5,$06,$C2,$12,$D2,$00,$67,$88,$8B,$8B,$2F,$AC,$CB,$D6,$2B,$86,$8E,$2A,$AC,$CB,$64,$8E,$AC,$44,$80,$A2,$A4,$87,$2A,$2A,$2A,$2A,$C9,$B4,$CE,$C2,$13,$D2,$00,$D6,$25,$CB,$4C,$8C,$8C,$8C,$2A,$2A,$2A,$2A,$C9,$B4,$C8,$CA

;org $8BDE40

org $8BDED4
db $C1,$03,$13,$C7,$0D,$03,$D2,$00,$C2,$00,$D2,$00,$D5,$06,$67,$88,$8B,$8B,$2F,$AC,$CB,$D6,$49,$A4,$87,$84,$AC,$8B,$80,$8D,$83,$AC,$CB,$87,$80,$A3,$AC,$D7,$AF,$8E,$8D,$AC,$CB,$80,$AC,$D6,$C7,$A3,$87,$80,$A0,$84,$2A,$C9,$B4,$CE,$C2,$04,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$CB,$64,$87,$80,$A4,$0E,$A3,$AC,$A4,$87,$84,$AC,$8D,$84,$A7,$AC,$A7,$8E,$A2,$8B,$83,$2A,$C9,$B4,$CE,$C2,$01,$D2,$00,$D6,$25,$CB,$4D,$84,$A7,$AC,$A7,$8E,$A2,$8B,$83,$0D,$C9,$B4,$CE,$C2,$04,$D2,$00,$67,$88,$8B,$8B,$0E,$A3,$AC,$85,$80,$A4,$87,$84,$A2,$2F,$AC,$64,$87,$84,$AC,$A0,$80,$A4,$87,$AC,$CB,$8E,$85,$AC,$84,$A6,$8E,$8B,$A5,$A4,$88,$8E,$8D,$2B,$AC,$D6,$7F,$CB,$81,$A9,$AC,$A4,$87,$84,$AC,$82,$8E,$8C,$84,$A4,$2B,$AC,$87,$80,$A3,$AC,$CB,$82,$8E,$8D,$A4,$88,$8D,$A5,$84,$83,$AC,$D7,$BC,$8D,$8E,$A7,$2A,$C9,$B4,$CE,$64,$87,$84,$AC,$44,$80,$A2,$A4,$87,$2B,$AC,$A4,$8E,$8E,$2B,$CB,$87,$80,$A3,$AC,$80,$AC,$8B,$88,$85,$84,$2A,$CB,$C9,$3C,$48,$A4,$2B,$AC,$D7,$B7,$87,$80,$A3,$AC,$84,$A6,$8E,$8B,$A6,$84,$83,$AC,$80,$8D,$83,$CB,$D6,$7F,$88,$A4,$A3,$AC,$A3,$87,$80,$A0,$84,$2A,$C9,$B4,$CE,$4D,$8E,$A7,$AC,$D6,$D7,$A4,$87,$84,$AC,$D6,$7B,$87,$80,$A3,$CB,$8D,$8E,$AC,$88,$8D,$85,$8B,$A5,$84,$8D,$82,$84,$AC,$8E,$8D,$AC,$A4,$87,$84,$CB,$A7,$8E,$A2,$8B,$83,$2B,$AC,$D6,$9F,$D7,$96,$A4,$8E,$CB,$88,$A4,$A3,$AC,$D6,$C0

;org $8BE01B

org $8BE075
db $D3,$D2,$00,$D5,$08,$64,$87,$84,$AC,$D7,$0B,$D6,$A9,$87,$80,$83,$CB,$82,$87,$80,$8D,$86,$84,$83,$2B,$AC,$81,$A5,$A4,$2B,$AC,$86,$8B,$8E,$A7,$88,$8D,$86,$CB,$88,$8D,$AC,$A4,$87,$84,$AC,$A3,$8A,$A9,$2B,$AC,$88,$A4,$AC,$A7,$80,$A3,$CB,$80,$A3,$AC,$D6,$76,$80,$A3,$AC,$84,$A6,$84,$A2,$2A,$C9,$B4,$CE,$41,$A5,$88,$8B,$83,$88,$8D,$86,$A3,$AC,$A2,$84,$A0,$8B,$80,$82,$84,$83,$AC,$A4,$87,$84,$AC,$CB,$85,$8E,$A2,$84,$A3,$A4,$A3,$2B,$AC,$A2,$88,$A6,$84,$A2,$A3,$AC,$81,$84,$82,$80,$8C,$84,$AC,$CB,$A2,$8E,$80,$83,$A3,$2B,$AC,$81,$A5,$A4,$AC,$A4,$87,$84,$AC,$A6,$88,$8B,$8B,$80,$86,$84,$A3,$AC,$CB,$87,$84,$8B,$83,$AC,$D7,$89,$A3,$8C,$88,$8B,$88,$8D,$86,$AC,$85,$80,$82,$84,$A3,$2A,$C9,$B4,$CE,$41,$A5,$A4,$AC,$A4,$87,$84,$AC,$D6,$14,$A7,$80,$A3,$CB,$A4,$87,$84,$AC,$D7,$89,$8E,$8D,$84,$CB,$D6,$D7,$D7,$80,$A3,$80,$83,$2A,$C9,$B4,$CE,$64,$8E,$8C,$8E,$A2,$A2,$8E,$A7,$AC,$8C,$8E,$A2,$8D,$88,$8D,$86,$AC,$CB,$D6,$26,$80,$8D,$83,$AC,$48,$AC,$D6,$EF,$A3,$A4,$80,$A2,$A4,$AC,$CB,$8E,$A5,$A2,$AC,$8D,$84,$A7,$AC,$8B,$88,$A6,$84,$A3,$2A,$C9,$B4,$CE,$64,$87,$84,$AC,$64,$8E,$A7,$84,$A2,$AC,$8E,$85,$AC,$41,$80,$81,$84,$8B,$CB,$D6,$D5,$A4,$80,$8B,$8B,$2B,$AC,$80,$A3,$AC,$88,$85,$AC,$88,$A4,$CB,$8A,$8D,$8E,$A7,$A3,$AC,$A4,$87,$84,$AC,$A7,$87,$8E,$8B,$84,$AC,$85,$A5,$A4,$A5,$A2,$84,$CB,$8E,$85,$AC,$A4,$87,$84,$AC,$44,$80,$A2,$A4,$87,$2A,$2A,$2A,$C9,$F0,$C8,$CA

;org $8BE1C5


org $8be237
db $00,$00,$28
EMainMenu:
lda #$0000 : sta $7F0A00
  sep #$20
    sta $212C
  rep #$20
lda #$FFFF : sta $0D92
  sta $0D96
  sta $0D98
lda #$4001 : tsb $09EC
sep #$20
  lda #$88 : sta $2124
  lda #$22 : sta $2125
rep #$20
lda #$0000 : sta $7F0A00
  sta $0B04
lda #$0001 : sta $00EE
sep #$20
  lda #$01 : sta $212C
  lda #$04 : sta $212D
  lda #$82 : sta $2130
  lda #$41 : sta $2131
rep #$20
lda #$0080 : sta $068A
  sta $06BE
lda #$0300 : sta $068E
  sta $06C2
lda #$3000 : tsb $065A
lda #$2800 : tsb $09AE
cop #$BD : dl $81EADC
cop #$6B : dw $F3F4
jsr S_8BED64
lda #$0F00 : sta $065C
  stz $18
cop #$C1
lda $0654 : bne B_8BE2CA
  rtl
B_8BE2CA:    ; org $8be2ca
bra J_8BE2D0
J_8BE2CC:
cop #$6B : dw $F3F4
J_8BE2D0:    ; org $8be2d0
lda #$FFFF : sta $0D92
lda #$0000 : sta $0D98
J_8BE2DC:    ; org $8be2dc
cop #$BD : dl $81EADC
cop #$C1
cop #$40 : dw $0800, ..PressedUp    ; $E2F6
cop #$40 : dw $0400, ..PressedDown    ; $E30F
cop #$40 : dw $0080, ..PressedA    ; $E32B
rtl
..PressedUp:    ; org $8be2f6
cop #$06 : db $10
lda $0D98 : dec : bpl +
  lda #$0003    ; Wrap around 0-->3
+:
sta $0D98
lda $0656 : ora $0658 : sta $0658
rtl
..PressedDown:    ; org $8be30f
cop #$06 : db $10
lda $0D98 : inc : cmp #$0004 : bcc +
  lda #$0000    ; Wrap around 3-->0
+:
sta $0D98
lda $0656 : ora $0658 : sta $0658
rtl
..PressedA:    ;org $8be32b
cop #$06 : db $11
lda $0656 : ora $0658 : sta $0658
lda $0D98 : and #$0003 : sta $0000
lda #$FFFF : sta $0D98
cop #$D9 : dw $0000, ...Choices    ; $E34C
...Choices:
  dw EMenuNew, EMenuErase, EMenuCopy, EMenuOptions
  ; $e354, $ea55, $e8a8, $e6ba

EMenuNew:    ; org $8be354
jsr S_8BEBF9
cop #$6B : dw $F437
cop #$C8 : dw B_8BEB8B
cop #$BD : dl $81EADC
lda $0D8C : and #$0003 : sta $0D92
J_8BE36D:    ; org $8be36d
cop #$C2
lda #$000C : sta $7F101C,x
cop #$C8 : dw B_8BE527
cop #$E2 : dl J_8BE36D
cop #$40 : dw $0800, $E398
cop #$40 : dw $0400, $E3B1
cop #$40 : dw $0080, $E3DF
cop #$40 : dw $8000, $E3CD
rtl

;org $8be398


org $8be3df    ; Select file


org $8be462
EMenuStartGame:
cop #$C2
cop #$40 : dw $0380, .ChangeOrConfirm
cop #$40 : dw $0800, LR_OptionsOrNewGamePressedUp
cop #$40 : dw $0400, LR_OptionsOrNewGamePressedDown
cop #$40 : dw $8000, .ReturnToNew
rtl
.ReturnToNew:    ; org $8be47d
cop #$06 : db $0D
lda $0656 : ora $0658 : sta $0658
lda #$FFFF : sta $0D98
lda $0D94 : sta $0D92
jmp EMenuNew
.ChangeOrConfirm:    ; org $8be498
lda #$0380 : tsb $0658
lda $0D98 : beq .TryConfirmGameStart
dec : bne .ChangeControlType
.ChangeSoundType:
cop #$06 : db $0D
lda $0D90 : inc : and #$0001 : sta $0D90
cop #$6B : db $f625
cop #$BD : dl $81EADC
lda #$0380 : tsb $0658
jmp EMenuStartGame
.ChangeControlType:    ; org $8be4c5
dec : bne .TryConfirmGameStart
cop #$06 : db $0D
lda $0D8E : inc : and #$0001 : sta $0D8E
cop #$6B : db $f630
cop #$BD : dl $81EADC
lda #$0380 : tsb $0658
jmp EMenuStartGame
.TryConfirmGameStart:    ; org $8be4e7
cop #$40 : dw $0080, .DoGameStart
rtl
;org $8be4ee    ; Begin new game
.DoGameStart:
cop #$06 : db $11
lda $0656 : ora $0658 : sta $0658
lda #$FFFF : sta $0D98
lda $0D90 : sta $0B24
lda $0D8E : sta $0B26
jsr SR_SetSettingsTextSoundMusic    ; $e673
lda #$0008 : sta $0642
cop #$26 : db $08, $50, $00, $A0, $00, $00, $00, $12
lda #$2800 : trb $09AE
cop #$E0

;org $8be527
B_8BE527:    ; org $8be527
phx
lda $0D92 : asl : tay
lda $0D74,y : asl : tax
lda $8BF706,x : sec : sbc #$F706 : tax
sep #$20
-:
lda $8BF706,x : inx : cmp #$CA : bne -
rep #$20
lda $8BF706,x : tay
lda $8BF708,x
plx : sta $7F100E,x
tya : sta $7F100C,x
sec : sbc $06BE : bmi B_8BE56E
sta $7F100C,x
lda #$0001 : sta $7F0000,x
bra J_8BE57D
B_8BE56E:    ; org $8be56e
eor #$FFFF : inc : sta $7F100C,x
lda #$FFFF : sta $7F0000,x
J_8BE57D:    ; org $8be57d
lda $7F100E,x : sec : sbc $06C2 : bmi B_8BE596
sta $7F100E,x
beq B_8BE590
lda #$0001
B_8BE590:    ; org $8be590
sta $7F0002,x
bra J_8BE5A7
B_8BE596:    ; org $8be596
eor #$FFFF : inc : sta $7F100E,x
beq B_8BE5A3
lda #$FFFF
B_8BE5A3:    ; org $8be5a3
sta $7F0002,x
J_8BE5A7:    ; org $8be5a7
lda $7F100C,x : cmp $7F100E,x : bcc B_8BE612
lda $7F100C,x : beq B_8BE610
sta $7F1014,x
lsr : sta $7F1010,x
lda $7F100E,x : sta $7F1012,x
cop #$C1
lda $7F101C,x : sta $0000
B_8BE5D1:    ; org $8be5d1
lda $7F0000,x : clc : adc $06BE : sta $06BE
lda $7F1010,x : sec : sbc $7F1012,x : sta $7F1010,x
bpl B_8BE5FF
clc : adc $7F100C,x : sta $7F1010,x
lda $7F0002,x : clc : adc $06C2 : sta $06C2
B_8BE5FF:    ; org $8be5ff
lda $7F1014,x : dec : sta $7F1014,x
beq B_8BE610
dec $0000 : bne B_8BE5D1
rtl
B_8BE610:    ; org $8be610
cop #$C5
B_8BE612:    ; org $8be612
lda $7F100E,x : beq B_8BE671
sta $7F1014,x
lsr : sta $7F1012,x
lda $7F100C,x : sta $7F1010,x
cop #$C1
lda $7F101C,x : sta $0000
B_8BE632:    ; org $8be632
lda $7F0002,x : clc : adc $06C2 : sta $06C2
lda $7F1012,x : sec : sbc $7F1010,x : sta $7F1012,x
bpl B_8BE660
clc : adc $7F100E,x : sta $7F1012,x
lda $7F0000,x : clc : adc $06BE : sta $06BE
B_8BE660:    ; org $8be660
lda $7F1014,x : dec : sta $7F1014,x : beq B_8BE671
dec $0000 : bne B_8BE632
rtl
B_8BE671:    ; org $8be671
cop #$C5

;org $8be673
SR_SetSettingsTextSoundMusic:
lda #$0000 : sta $0B04
stz $00EE
lda $0B24 : bne .SoundMono
.SoundStereo:
sep #$20
  lda #$91 : sta $2140
rep #$20
bra .CheckControl
.SoundMono:    ; org $8be68c
sep #$20
  lda #$90 : sta $2140
rep #$20
.CheckControl:    ; org $8be695
lda $0B26 : bne .Style2
.Style1:
  lda #$8000 : sta $0DAC    ; Controller button masks.
  lda #$4000 : sta $0DAA    ; Controller button masks.
  lda #$0000 : sta $0DB0    ; Controller button masks.
  lda #$0040 : sta $0DAE    ; Controller button masks.
rts
; org $8be6b3
.Style2:
lda #$0000 : sta $0DB0
rts

EMenuOptions:    ; org $8be6ba


org $8be75b
LR_OptionsOrNewGamePressedUp:
cop #$06 : db $10
lda $0656 : ora $0658 : sta $0658
lda $0D98 : dec : bpl B_8BE770
lda #$0002
B_8BE770:    ; org $8be770
sta $0D98
rtl
; org $8be774
LR_OptionsOrNewGamePressedDown:
cop #$06 : db $10
lda $0656 : ora $0658 : sta $0658
lda $0D98 : inc a : cmp #$0003 : bcc B_8BE78C
lda #$0000
B_8BE78C:    ; org $8be78c
sta $0D98
rtl
warnpc $8be790


EMenuCopy:    ; org $8be8a8


EMenuErase:    ; org $8bea55


org $8beb8b    ; Fill in save file stats
B_8BEB8B:
lda $0D74 : beq B_8BEBAF
lda $0D7A
jsr SR_Bin2DecForMenu : sta $0D9A
lda $0D80
jsr SR_Bin2DecForMenu : sta $0D9E
lda $0D86
jsr SR_Bin2DecForMenu : sta $0D9C : cop #$6B : db $C3, $F4
B_8BEBAF:    ; org $8bebaf
lda $0D76 : beq B_8BEBD3
lda $0D7C
jsr SR_Bin2DecForMenu : sta $0D9A
lda $0D82
jsr SR_Bin2DecForMenu : sta $0D9E
lda $0D88
jsr SR_Bin2DecForMenu : sta $0D9C : cop #$6B : db $EA, $F4
B_8BEBD3:    ; org $8bebd3
lda $0D78 : beq B_8BEBF7
lda $0D7E
jsr SR_Bin2DecForMenu : sta $0D9A
lda $0D84
jsr SR_Bin2DecForMenu : sta $0D9E
lda $0D8A
jsr SR_Bin2DecForMenu : sta $0D9C : cop #$6B : db $11, $F5
B_8BEBF7:    ; org $8bebf7
cop #$C5

;org $8bebf9    ; Clear BG3
S_8BEBF9:
php
phx
phd
sep #$20
jsl S_82F076
plx
pld
plp
rts
warnpc $8bec06


org $8BEE20
db $02,$00,$10
EDebugMan:
{
cop #$0B
cop #$C0 : dw .OnUse    ; $EE2C
cop #$C1
rtl
.OnUse:   ; $8BEE2C
lda #$0028 : sta $0ACA : sta $0ACE
lda #$007F : sta $0ADE : sta $0ADC
lda #$00FF : sta $0AA2
.Menu1:
cop #$BF : dw $F010
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Menu2, .GreatWall
  dw .Ending, .EdwardsCastle
.Menu2:
cop #$BF : dw $F05C
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Menu3, .ItoryVillage
  dw .MoonTribe, .EdwardsDungeon
.Menu3:
cop #$BF : dw $F095
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Menu4, .Euro
  dw .NativesVillage, .Dao
.Menu4:
cop #$BF : dw $F0C3
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Menu5, .Inca
  dw .Freejia, .DiamondMine
.Menu5:
cop #$BF : dw $F0EC
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Menu6, .SkyGarden
  dw .SeaPalace, .Mu
.Menu6:
cop #$BF : dw $F10D
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Menu7, .AngelVillage
  dw .NativesVillageDupe, .DaoDupe
.Menu7:
cop #$BF : dw $F135
cop #$BE : dw $0004, ..Options
..Options:
  dw .Cancel
  dw .Cancel, .Pyramid
  dw .Watermia, .AngkorWat
.Cancel:
cop #$BF : dw $F15A
rtl 
.GreatWall:
cop #$BF : dw $F164
cop #$26 : db $82 : dw $0020,$0090 : db $07,$00,$18
rtl 
.EdwardsCastle:
cop #$BF : dw $F164
cop #$26 : db $0A : dw $01E3,$00A0 : db $03,$00,$45
rtl 
.Ending:
cop #$BF : dw $F164
cop #$26 : db $E5 : dw $00A8,$00A0 : db $00,$00,$11
rtl 
.Itory:
cop #$BF : dw $F164
cop #$26 : db $15 : dw $0339,$01B0 : db $00,$00,$35
rtl 
.MoonTribe:
cop #$BF : dw $F164
cop #$26 : db $1A : dw $0110,$00C3 : db $00,$00,$22
rtl 
.EdwardsDungeon:
cop #$BF : dw $F164
cop #$26 : db $0F : dw $0078,$05D0 : db $00,$00,$61
rtl 
.Euro:
cop #$BF : dw $F164
cop #$26 : db $91 : dw $0370,$0430 : db $03,$00,$54
rtl 
.NativesVillage:
cop #$BF : dw $F164
cop #$26 : db $AC : dw $01C0,$01D0 : db $07,$00,$22
rtl 
.Dao:
cop #$BF : dw $F164
cop #$26 : db $C3 : dw $0010,$00E8 : db $07,$00,$23
rtl 
.Inca:
cop #$BF : dw $F164
cop #$26 : db $1C : dw $006C,$0174 : db $07,$00,$22
rtl 
.Freejia:
cop #$BF : dw $F164
cop #$26 : db $32 : dw $0138,$0360 : db $07,$00,$45
rtl 
.DiamondMine:
cop #$BF : dw $F164
cop #$26 : db $3E : dw $00B0,$03D0 : db $07,$00,$42
rtl 
.SkyGarden:
cop #$BF : dw $F164
cop #$26 : db $4C : dw $0100,$0136 : db $07,$00,$22
rtl 
.SeaPalace:
cop #$BF : dw $F164
cop #$26 : db $5A : dw $0088,$00A0 : db $07,$00,$64
rtl 
.Mu:
cop #$BF : dw $F164
cop #$26 : db $5F : dw $0088,$0050 : db $07,$00,$44
rtl 
.AngelVillage:
cop #$BF : dw $F164
cop #$26 : db $69 : dw $02A8,$00A0 : db $07,$00,$13
rtl 
.NativesVillageDupe:
cop #$BF : dw $F164
cop #$26 : db $AC : dw $01C8,$01E0 : db $07,$00,$22
rtl 
.DaoDupe:
cop #$BF : dw $F164
cop #$26 : db $C3 : dw $0020,$00F0 : db $07,$00,$23
rtl 
.Pyramid:
cop #$BF : dw $F164
cop #$26 : db $CC : dw $002C,$00E0 : db $07,$00,$44
rtl 
.Watermia:
cop #$BF : dw $F164
cop #$26 : db $78 : dw $027E,$03A0 : db $07,$00,$45
rtl 
.AngkorWat:
cop #$BF : dw $F164
cop #$26 : db $B0 : dw $0200,$04D0 : db $07,$00,$54
rtl 

;org $8BF010
db $D3,$47,$84,$8B,$8B,$8E,$4F,$AC,$48,$AC,$80,$8C,$AC,$43,$84,$81,$A5,$86,$6D,$8C,$80,$8D,$4F,$CB,$D6,$65,$A9,$8E,$A5,$AC,$86,$8E,$0D,$CF,$AC,$4E,$A4,$87,$84,$A2,$A3,$CB,$AC,$D6,$16,$67,$80,$8B,$8B,$CB,$AC,$4B,$40,$63,$64,$AC,$46,$40,$48,$40,$AC,$4B,$4E,$4E,$4A,$CB,$AC,$44,$43,$4E,$67,$40,$6D,$43,$4E,$CA
;org $8BF05C
db $CE,$AC,$4E,$A4,$87,$84,$A2,$A3,$CB,$AC,$48,$A4,$8E,$A2,$88,$84,$CB,$AC,$47,$4E,$4C,$44,$AC,$4E,$45,$AC,$4C,$4E,$4E,$4D,$AC,$64,$62,$48,$41,$44,$CB,$AC,$65,$8D,$83,$84,$A2,$86,$A2,$8E,$A5,$8D,$83,$AC,$82,$80,$A3,$A4,$8B,$84,$CA
;org $8BF095
db $CE,$AC,$4E,$A4,$87,$84,$A2,$A3,$CB,$AC,$D6,$08,$8E,$85,$AC,$44,$A5,$A2,$8E,$CB,$AC,$D7,$22,$66,$88,$8B,$8B,$80,$86,$84,$CB,$AC,$D7,$08,$66,$88,$8B,$8B,$80,$86,$84,$AC,$43,$80,$8E,$CA
;org $8BF0C3
db $CE,$AC,$4E,$A4,$87,$84,$A2,$A3,$CB,$AC,$48,$4D,$42,$40,$CB,$AC,$47,$40,$4D,$40,$4D,$4E,$4C,$48,$69,$40,$4A,$4E,$CB,$AC,$43,$40,$48,$69,$40,$4C,$4E,$4D,$43,$4E,$CA
;org $8BF0EC
db $CE,$AC,$4E,$A4,$87,$84,$A2,$A3,$CB,$AC,$63,$8A,$A9,$AC,$46,$80,$A2,$83,$84,$8D,$CB,$AC,$60,$80,$8B,$80,$82,$84,$CB,$AC,$4C,$A5,$CA
;org $8BF10D
db $CE,$AC,$4E,$A4,$87,$84,$A2,$A3,$CB,$AC,$40,$8D,$86,$84,$8B,$AC,$66,$88,$8B,$8B,$80,$86,$84,$CB,$AC,$D7,$22,$66,$88,$8B,$8B,$80,$86,$84,$CB,$AC,$43,$80,$8E,$CA
;org $8BF135
db $CE,$AC,$61,$A5,$88,$A4,$CB,$AC,$60,$A9,$A2,$80,$8C,$88,$83,$CB,$AC,$67,$80,$A4,$84,$A2,$8C,$88,$80,$CB,$AC,$40,$8D,$8A,$8E,$A2,$AC,$67,$80,$A4,$CA
;org $8BF15A
db $CE,$41,$A9,$84,$AC,$81,$A9,$84,$4F,$C0
;org $8BF164
db $CE,$4E,$8A,$4F,$CB,$63,$84,$84,$AC,$A9,$8E,$A5,$AC,$80,$86,$80,$88,$8D,$4F,$C0
}

;org $8BF178
; Unknown code.
lda $00E0 : and $00E2 : sta $00E2
lda $00E2 : trb $00E0
lda $00E0 : bit #$0040 : beq +
  ldy $09AA
  lda $0010,y : eor #$0008 : sta $0010,y
  lda #$0040 : tsb $00E2
+:
rtl
;org $8BF1A2
stz $00DE
rtl
;org $8BF1A6
inc $00DE
rtl
;org $8BF1AA

org $8bf1db
SR_Bin2DecForMenu:
{
pha
ldy $0000
stz $0000
cmp #$03E8 : bcs .OverOneThousandGiveUp   ; = 1000
cmp #$01F4 : bcc .CollectHundreds   ; = 500
.CollectFiveHundred:
sec : sbc #$01F4
pha
  lda #$0005 : sta $0000
pla
.CollectHundreds:
cmp #$0064 : bcc .CheckTens
sec : sbc #$0064
inc $0000
bra .CollectHundreds
.CheckTens:    ; org $8bf206
pha
  lda $0000 : xba : and #$FF00 : sta $0000
pla
sep #$20
cmp #$32 : bcc .CollectTens
.CollectFifty:
sec : sbc #$32
pha
lda #$05 : sta $0000
pla
.CollectTens:    ; org $8bf222
cmp #$0A : bcc .CollectOnes
sec : sbc #$0A
inc $0000 : bra .CollectTens
.CollectOnes:    ; org $8bf22e
pha
lda $0000 : asl : asl : asl : asl : ora $01,s : sta $01,s
pla
rep #$20
sta $01,s
sty $0000
pla
clc
rts
.OverOneThousandGiveUp:    ; org $8bf245
sty $0000
pla
sec
rts
}
warnpc $8bf24b

org $8bf437
Bg3_DiaryListNew:
db $C1,$02,$08
db $C7,$0E,$07
db $67,$87,$88,$82,$87,$AC,$43,$88,$80,$A2,$A9,$0D,$CB
Bg3_DiaryList:
db $AC,$43,$88,$80,$A2,$A9,$21,$AC,$C5,$06,$F7,$74,$0D,$CB,$CB
db $AC,$43,$88,$80,$A2,$A9,$22,$AC,$C5,$06,$F7,$76,$0D,$CB,$CB
db $AC,$43,$88,$80,$A2,$A9,$23,$AC,$C5,$06,$F7,$78,$0D
db $CA
Bg3_DiaryListChangeSnd:
db $C1,$02,$08
db $C7,$0E,$07
db $D6,$0B,$63,$8D,$83,$6B,$41,$A5,$A4,$A4,$8E,$8D,$CB
db $D1,$4A,$F4   ; i.e. db $d1 : dw Bg3_DiaryList
Bg3_DiaryListMove:
db $C1,$02,$08
db $C7,$0E,$07
db $4C,$8E,$A6,$84,$AC,$A7,$87,$88,$82,$87,$AC,$43,$88,$80,$A2,$A9,$0D,$CB
db $D1,$4A,$F4   ; i.e. db $d1 : dw Bg3_DiaryList
Bg3_DiaryListErase:
db $C1,$02,$08
db $C7,$0E,$07
db $44,$A2,$80,$A3,$84,$AC,$A7,$87,$88,$82,$87,$AC,$43,$88,$80,$A2,$A9,$0D,$CB
db $D1,$4A,$F4   ; i.e. db $d1 : dw Bg3_DiaryList
Bg3_Diary1Stats:   ; $8bf4c3
db $C1,$02,$0C
db $CC,$02
db $47,$60   ; "HP"
db $CC,$01
db $C6,$02,$00,$9A,$0D
db $CC,$02
db $63,$64,$62   ; "STR"
db $CC,$01
db $C6,$02,$00,$9C,$0D
db $CC,$02
db $43,$44,$45   ; "DEF"
db $CC,$01
db $C6,$02,$00,$9E,$0D
db $CA
Bg3_Diary2Stats:
db $C1,$02,$10
db $CC,$02
db $47,$60
db $CC,$01
db $C6,$02,$00,$9A,$0D
db $CC,$02
db $63,$64,$62
db $CC,$01
db $C6,$02,$00,$9C,$0D
db $CC,$02
db $43,$44,$45
db $CC,$01
db $C6,$02,$00,$9E,$0D
db $CA
Bg3_Diary3Stats:
db $C1,$02,$14
db $CC,$02
db $47,$60
db $CC,$01
db $C6,$02,$00,$9A,$0D
db $CC,$02
db $63,$64,$62
db $CC,$01
db $C6,$02,$00,$9C,$0D
db $CC,$02
db $43,$44,$45
db $CC,$01
db $C6,$02,$00,$9E,$0D
db $CA

;org $8bf538

org $8bf706
Table_SaveFileLocationText:
.Pointers:
{
dw .StartFromBeginning    ; $f906  Map $00
dw .SouthCape             ; $f91c  Map $01
dw .StartFromBeginning    ; $f906  Map $02
dw .StartFromBeginning    ; $f906  Map $03
dw .StartFromBeginning    ; $f906  Map $04
dw .StartFromBeginning    ; $f906  Map $05
dw .StartFromBeginning    ; $f906  Map $06
dw .StartFromBeginning    ; $f906  Map $07
dw .StartFromBeginning    ; $f906  Map $08
dw .StartFromBeginning    ; $f906  Map $09
dw .StartFromBeginning    ; $f906  Map $0A
dw .EdwardPrison          ; $f927  Map $0B
dw .StartFromBeginning    ; $f906  Map $0C
dw .StartFromBeginning    ; $f906  Map $0D
dw .StartFromBeginning    ; $f906  Map $0E
dw .StartFromBeginning    ; $f906  Map $0F
dw .StartFromBeginning    ; $f906  Map $10
dw .StartFromBeginning    ; $f906  Map $11
dw .UndergroundTunnel     ; $f934  Map $12
dw .StartFromBeginning    ; $f906  Map $13
dw .StartFromBeginning    ; $f906  Map $14
dw .ItoryVillage          ; $f94b  Map $15
dw .StartFromBeginning    ; $f906  Map $16
dw .StartFromBeginning    ; $f906  Map $17
dw .StartFromBeginning    ; $f906  Map $18
dw .StartFromBeginning    ; $f906  Map $19
dw .StartFromBeginning    ; $f906  Map $1A
dw .StartFromBeginning    ; $f906  Map $1B
dw .StartFromBeginning    ; $f906  Map $1C
dw .StartFromBeginning    ; $f906  Map $1D
dw .LaraiCliff            ; $f95e  Map $1E
dw .StartFromBeginning    ; $f906  Map $1F
dw .StartFromBeginning    ; $f906  Map $20
dw .StartFromBeginning    ; $f906  Map $21
dw .StartFromBeginning    ; $f906  Map $22
dw .StartFromBeginning    ; $f906  Map $23
dw .StartFromBeginning    ; $f906  Map $24
dw .StartFromBeginning    ; $f906  Map $25
dw .IncanRuins            ; $f96a  Map $26
dw .StartFromBeginning    ; $f906  Map $27
dw .IncanRuins            ; $f96a  Map $28
dw .StartFromBeginning    ; $f906  Map $29
dw .StartFromBeginning    ; $f906  Map $2A
dw .StartFromBeginning    ; $f906  Map $2B
dw .StartFromBeginning    ; $f906  Map $2C
dw .StartFromBeginning    ; $f906  Map $2D
dw .StartFromBeginning    ; $f906  Map $2E
dw .StartFromBeginning    ; $f906  Map $2F
dw .StartFromBeginning    ; $f906  Map $30
dw .StartFromBeginning    ; $f906  Map $31
dw .StartFromBeginning    ; $f906  Map $32
dw .StartFromBeginning    ; $f906  Map $33
dw .Freejia               ; $f97a  Map $34
dw .StartFromBeginning    ; $f906  Map $35
dw .StartFromBeginning    ; $f906  Map $36
dw .StartFromBeginning    ; $f906  Map $37
dw .StartFromBeginning    ; $f906  Map $38
dw .StartFromBeginning    ; $f906  Map $39
dw .StartFromBeginning    ; $f906  Map $3A
dw .StartFromBeginning    ; $f906  Map $3B
dw .StartFromBeginning    ; $f906  Map $3C
dw .DiamondMine           ; $f986  Map $3D
dw .StartFromBeginning    ; $f906  Map $3E
dw .StartFromBeginning    ; $f906  Map $3F
dw .DiamondMine           ; $f986  Map $40
dw .StartFromBeginning    ; $f906  Map $41
dw .DiamondMine           ; $f986  Map $42
dw .StartFromBeginning    ; $f906  Map $43
dw .StartFromBeginning    ; $f906  Map $44
dw .StartFromBeginning    ; $f906  Map $45
dw .StartFromBeginning    ; $f906  Map $46
dw .StartFromBeginning    ; $f906  Map $47
dw .StartFromBeginning    ; $f906  Map $48
dw .StartFromBeginning    ; $f906  Map $49
dw .StartFromBeginning    ; $f906  Map $4A
dw .StartFromBeginning    ; $f906  Map $4B
dw .SkyGarden             ; $f991  Map $4C
dw .StartFromBeginning    ; $f906  Map $4D
dw .StartFromBeginning    ; $f906  Map $4E
dw .StartFromBeginning    ; $f906  Map $4F
dw .StartFromBeginning    ; $f906  Map $50
dw .SkyGarden             ; $f991  Map $51
dw .StartFromBeginning    ; $f906  Map $52
dw .StartFromBeginning    ; $f906  Map $53
dw .SkyGarden             ; $f991  Map $54
dw .StartFromBeginning    ; $f906  Map $55
dw .SkyGarden             ; $f991  Map $56
dw .StartFromBeginning    ; $f906  Map $57
dw .StartFromBeginning    ; $f906  Map $58
dw .StartFromBeginning    ; $f906  Map $59
dw .SeasidePalace         ; $f9a0  Map $5A
dw .StartFromBeginning    ; $f906  Map $5B
dw .StartFromBeginning    ; $f906  Map $5C
dw .StartFromBeginning    ; $f906  Map $5D
dw .StartFromBeginning    ; $f906  Map $5E
dw .StartFromBeginning    ; $f906  Map $5F
dw .Mu                    ; $f9ad  Map $60
dw .StartFromBeginning    ; $f906  Map $61
dw .Mu                    ; $f9ad  Map $62
dw .StartFromBeginning    ; $f906  Map $63
dw .StartFromBeginning    ; $f906  Map $64
dw .StartFromBeginning    ; $f906  Map $65
dw .StartFromBeginning    ; $f906  Map $66
dw .StartFromBeginning    ; $f906  Map $67
dw .StartFromBeginning    ; $f906  Map $68
dw .StartFromBeginning    ; $f906  Map $69
dw .StartFromBeginning    ; $f906  Map $6A
dw .StartFromBeginning    ; $f906  Map $6B
dw .AngelVillage          ; $f9b4  Map $6C
dw .StartFromBeginning    ; $f906  Map $6D
dw .StartFromBeginning    ; $f906  Map $6E
dw .StartFromBeginning    ; $f906  Map $6F
dw .StartFromBeginning    ; $f906  Map $70
dw .StartFromBeginning    ; $f906  Map $71
dw .StartFromBeginning    ; $f906  Map $72
dw .StartFromBeginning    ; $f906  Map $73
dw .StartFromBeginning    ; $f906  Map $74
dw .StartFromBeginning    ; $f906  Map $75
dw .StartFromBeginning    ; $f906  Map $76
dw .StartFromBeginning    ; $f906  Map $77
dw .StartFromBeginning    ; $f906  Map $78
dw .StartFromBeginning    ; $f906  Map $79
dw .StartFromBeginning    ; $f906  Map $7A
dw .StartFromBeginning    ; $f906  Map $7B
dw .Watermia              ; $f9c6  Map $7C
dw .StartFromBeginning    ; $f906  Map $7D
dw .StartFromBeginning    ; $f906  Map $7E
dw .StartFromBeginning    ; $f906  Map $7F
dw .StartFromBeginning    ; $f906  Map $80
dw .StartFromBeginning    ; $f906  Map $81
dw .StartFromBeginning    ; $f906  Map $82
dw .StartFromBeginning    ; $f906  Map $83
dw .StartFromBeginning    ; $f906  Map $84
dw .GreatWall             ; $f9d3  Map $85
dw .GreatWall             ; $f9d3  Map $86
dw .StartFromBeginning    ; $f906  Map $87
dw .GreatWall             ; $f9d3  Map $88
dw .StartFromBeginning    ; $f906  Map $89
dw .StartFromBeginning    ; $f906  Map $8A
dw .StartFromBeginning    ; $f906  Map $8B
dw .StartFromBeginning    ; $f906  Map $8C
dw .StartFromBeginning    ; $f906  Map $8D
dw .StartFromBeginning    ; $f906  Map $8E
dw .StartFromBeginning    ; $f906  Map $8F
dw .StartFromBeginning    ; $f906  Map $90
dw .StartFromBeginning    ; $f906  Map $91
dw .StartFromBeginning    ; $f906  Map $92
dw .StartFromBeginning    ; $f906  Map $93
dw .StartFromBeginning    ; $f906  Map $94
dw .StartFromBeginning    ; $f906  Map $95
dw .StartFromBeginning    ; $f906  Map $96
dw .StartFromBeginning    ; $f906  Map $97
dw .StartFromBeginning    ; $f906  Map $98
dw .CityOfEuro            ; $f9de  Map $99
dw .StartFromBeginning    ; $f906  Map $9A
dw .StartFromBeginning    ; $f906  Map $9B
dw .StartFromBeginning    ; $f906  Map $9C
dw .StartFromBeginning    ; $f906  Map $9D
dw .StartFromBeginning    ; $f906  Map $9E
dw .StartFromBeginning    ; $f906  Map $9F
dw .StartFromBeginning    ; $f906  Map $A0
dw .MtTemple              ; $f9ed  Map $A1
dw .StartFromBeginning    ; $f906  Map $A2
dw .MtTemple              ; $f9ed  Map $A3
dw .StartFromBeginning    ; $f906  Map $A4
dw .StartFromBeginning    ; $f906  Map $A5
dw .StartFromBeginning    ; $f906  Map $A6
dw .MtTemple              ; $f9ed  Map $A7
dw .StartFromBeginning    ; $f906  Map $A8
dw .StartFromBeginning    ; $f906  Map $A9
dw .StartFromBeginning    ; $f906  Map $AA
dw .StartFromBeginning    ; $f906  Map $AB
dw .NativesVillage        ; $f9fc  Map $AC
dw .StartFromBeginning    ; $f906  Map $AD
dw .StartFromBeginning    ; $f906  Map $AE
dw .StartFromBeginning    ; $f906  Map $AF
dw .StartFromBeginning    ; $f906  Map $B0
dw .StartFromBeginning    ; $f906  Map $B1
dw .StartFromBeginning    ; $f906  Map $B2
dw .StartFromBeginning    ; $f906  Map $B3
dw .StartFromBeginning    ; $f906  Map $B4
dw .StartFromBeginning    ; $f906  Map $B5
dw .Garden                ; $fa12  Map $B6
dw .StartFromBeginning    ; $f906  Map $B7
dw .AnkorWat              ; $fa1d  Map $B8
dw .StartFromBeginning    ; $f906  Map $B9
dw .StartFromBeginning    ; $f906  Map $BA
dw .AnkorWat              ; $fa1d  Map $BB
dw .StartFromBeginning    ; $f906  Map $BC
dw .StartFromBeginning    ; $f906  Map $BD
dw .StartFromBeginning    ; $f906  Map $BE
dw .StartFromBeginning    ; $f906  Map $BF
dw .StartFromBeginning    ; $f906  Map $C0
dw .StartFromBeginning    ; $f906  Map $C1
dw .StartFromBeginning    ; $f906  Map $C2
dw .DaoVillage            ; $fa2b  Map $C3
dw .StartFromBeginning    ; $f906  Map $C4
dw .StartFromBeginning    ; $f906  Map $C5
dw .StartFromBeginning    ; $f906  Map $C6
dw .StartFromBeginning    ; $f906  Map $C7
dw .StartFromBeginning    ; $f906  Map $C8
dw .StartFromBeginning    ; $f906  Map $C9
dw .StartFromBeginning    ; $f906  Map $CA
dw .StartFromBeginning    ; $f906  Map $CB
dw .Pyramid               ; $fa3b  Map $CC
dw .StartFromBeginning    ; $f906  Map $CD
dw .StartFromBeginning    ; $f906  Map $CE
dw .StartFromBeginning    ; $f906  Map $CF
dw .StartFromBeginning    ; $f906  Map $D0
dw .StartFromBeginning    ; $f906  Map $D1
dw .StartFromBeginning    ; $f906  Map $D2
dw .StartFromBeginning    ; $f906  Map $D3
dw .StartFromBeginning    ; $f906  Map $D4
dw .StartFromBeginning    ; $f906  Map $D5
dw .StartFromBeginning    ; $f906  Map $D6
dw .StartFromBeginning    ; $f906  Map $D7
dw .StartFromBeginning    ; $f906  Map $D8
dw .StartFromBeginning    ; $f906  Map $D9
dw .StartFromBeginning    ; $f906  Map $DA
dw .StartFromBeginning    ; $f906  Map $DB
dw .StartFromBeginning    ; $f906  Map $DC
dw .StartFromBeginning    ; $f906  Map $DD
dw .StartFromBeginning    ; $f906  Map $DE
dw .StartFromBeginning    ; $f906  Map $DF
dw .BabelTower            ; $fa47  Map $E0
dw .StartFromBeginning    ; $f906  Map $E1
dw .StartFromBeginning    ; $f906  Map $E2
dw .BabelTower            ; $fa47  Map $E3
dw .StartFromBeginning    ; $f906  Map $E4
dw .StartFromBeginning    ; $f906  Map $E5
dw .StartFromBeginning    ; $f906  Map $E6
dw .StartFromBeginning    ; $f906  Map $E7
dw .StartFromBeginning    ; $f906  Map $E8
dw .StartFromBeginning    ; $f906  Map $E9
dw .StartFromBeginning    ; $f906  Map $EA
dw .StartFromBeginning    ; $f906  Map $EB
dw .StartFromBeginning    ; $f906  Map $EC
dw .StartFromBeginning    ; $f906  Map $ED
dw .StartFromBeginning    ; $f906  Map $EE
dw .StartFromBeginning    ; $f906  Map $EF
dw .StartFromBeginning    ; $f906  Map $F0
dw .StartFromBeginning    ; $f906  Map $F1
dw .StartFromBeginning    ; $f906  Map $F2
dw .StartFromBeginning    ; $f906  Map $F3
dw .StartFromBeginning    ; $f906  Map $F4
dw .StartFromBeginning    ; $f906  Map $F5
dw .StartFromBeginning    ; $f906  Map $F6
dw .StartFromBeginning    ; $f906  Map $F7
dw .StartFromBeginning    ; $f906  Map $F8
dw .StartFromBeginning    ; $f906  Map $F9
dw .StartFromBeginning    ; $f906  Map $FA
dw .StartFromBeginning    ; $f906  Map $FB
dw .StartFromBeginning    ; $f906  Map $FC
dw .StartFromBeginning    ; $f906  Map $FD
dw .StartFromBeginning    ; $f906  Map $FE
dw .StartFromBeginning    ; $f906  Map $FF
}
;org $8bf906
.StartFromBeginning:    ; $f906, invalid save point
db $63,$a4,$80,$a2,$a4,$ac,$d6,$8e,$81,$84,$86,$88,$8d,$8d,$88,$8d,$86,$ca,$80,$00,$00,$03
.SouthCape:    ; $$f91c
db $d6,$47,$42,$80,$a0,$84,$ca,$80,$00,$20,$03
.EdwardPrison:    ; $$f927
db $d6,$11,$60,$a2,$88,$a3,$8e,$8d,$ca,$80,$00,$b0,$02
.UndergroundTunnel:    ; $$f934
db $65,$8d,$83,$84,$a2,$86,$a2,$8e,$a5,$8d,$83,$ac,$64,$a5,$8d,$8d,$84,$8b,$ca,$80,$00,$b0,$02
.ItoryVillage:    ; $
db $48,$a4,$8e,$a2,$a9,$ac,$66,$88,$8b,$8b,$80,$86,$84,$ac,$ca,$4a,$00,$38,$02
.LaraiCliff:    ; $
db $d7,$19,$42,$8b,$88,$85,$85,$ca,$ba,$00,$0c,$02
.IncanRuins:    ; $
db $48,$8d,$82,$80,$8d,$ac,$a2,$a5,$88,$8d,$a3,$ca,$ba,$00,$0c,$02
.Freejia:    ; $
db $45,$a2,$84,$84,$89,$88,$80,$ca,$da,$01,$5c,$02
.DiamondMine:    ; $
db $d6,$0e,$4c,$88,$8d,$84,$ca,$c0,$02,$ec,$02
.SkyGarden:    ; $
db $63,$8a,$a9,$ac,$46,$80,$a2,$83,$84,$8d,$ca,$8a,$02,$1c,$02
.SeasidePalace:    ; $
db $d7,$32,$60,$80,$8b,$80,$82,$84,$ca,$f3,$02,$1a,$00
.Mu:    ; $
db $4c,$a5,$ca,$b0,$02,$00,$00
.AngelVillage:    ; $
db $40,$8d,$86,$84,$8b,$ac,$66,$88,$8b,$8b,$80,$86,$84,$ca,$f3,$02,$00,$01
.Watermia:    ; $
db $67,$80,$a4,$84,$a2,$8c,$88,$80,$ca,$54,$02,$2a,$01
.GreatWall:    ; $
db $d6,$16,$67,$80,$8b,$8b,$ca,$28,$02,$b0,$00
.CityOfEuro:    ; $
db $d6,$08,$8e,$85,$ac,$44,$a5,$a2,$8e,$ac,$ca,$58,$01,$c0,$00
.MtTemple:    ; $
db $4c,$a4,$2a,$ac,$64,$84,$8c,$a0,$8b,$84,$ca,$8e,$01,$46,$00
.NativesVillage:    ; $
db $4d,$80,$a4,$88,$a6,$84,$a3,$0e,$ac,$66,$88,$8b,$8b,$80,$86,$84,$ac,$ca,$a8,$00,$34,$01
.Garden:    ; $
db $46,$80,$a2,$83,$84,$8d,$ca,$b8,$00,$e0,$00
.AnkorWat:    ; $
db $40,$8d,$8a,$8e,$a2,$ac,$67,$80,$a4,$ca,$b8,$00,$e0,$00
.DaoVillage:    ; $
db $43,$80,$8e,$ac,$66,$88,$8b,$8b,$80,$86,$84,$ca,$14,$00,$a2,$00
.Pyramid:    ; $
db $60,$a9,$a2,$80,$8c,$88,$83,$ca,$00,$00,$38,$00
.BabelTower:    ; $
db $41,$80,$81,$84,$8b,$ac,$64,$8e,$a7,$84,$a2,$ca,$84,$01,$90,$01


;org $8bfa57
db $00,$00,$28
EDebugActorMaxStats:
lda #$0040 : sta $0ade
lda #$0040 : sta $0adc
lda #$0040 : sta $0aca
lda #$0040 : sta $0b22    ; (full heal)
cop #$E0


;org $8BFA74
Bank8BFree:
pad $8C0000
